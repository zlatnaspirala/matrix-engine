!function r(i,a,n){function s(e,t){if(!a[e]){if(!i[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(l)return l(e,!0);throw(o=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",o}o=a[e]={exports:{}},i[e][0].call(o.exports,function(t){return s(i[e][1][t]||t)},o,o.exports,r,i,a,n)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<n.length;t++)s(n[t]);return s}({1:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r,i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=n(e);if(e&&e.has(t))return e.get(t);var o,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t){var a;"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&((a=i?Object.getOwnPropertyDescriptor(t,o):null)&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o])}r.default=t,e&&e.set(t,r);return r}(t("./index.js")),a=t("./apps/adding_tex_square_raycast");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(n=function(t){return t?o:e})(t)}var s=i.App;i.Engine.load_shaders("shaders/shaders.html"),"serviceWorker"in navigator?window.addEventListener("load",function(t){s.ready=!0,i.Engine.initApp(webGLStart)}):console.warn("Matrix Engine: No support for web workers in this browser."),window.webGLStart=()=>{(r=i.matrixWorld.defineworld(canvas)).callReDraw(),window.world=r,window.App=s,window.runThis=a.runThis,i.utility.E("debugBox").style.display="block",setTimeout(()=>{(0,a.runThis)(r)},250)};s=(window.matrixEngine=i).App;o.default=s},{"./apps/adding_tex_square_raycast":2,"./index.js":3}],2:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.runThis=void 0;var r,i=(r=t("../program/manifest"))&&r.__esModule?r:{default:r};o.runThis=t=>{var e={source:["res/images/complex_texture_1/diffuse.png"],mix_operation:"multiply"};t.Add("squareTex",1,"MyColoredSquareRayObject",e),i.default.scene.MyColoredSquareRayObject.position.SetX(0),t.Add("squareTex",1,"MyColoredSquareRayObjectHelper",e),i.default.scene.MyColoredSquareRayObject.position.SetX(0),canvas.addEventListener("mousedown",t=>{matrixEngine.raycaster.checkingProcedure(t)}),canvas.addEventListener("ray.hit.event",t=>{alert("You shoot the object! Nice")})}},{"../program/manifest":20}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"App",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(o,"operation",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"texTools",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(o,"MEBvhAnimation",{enumerable:!0,get:function(){return s.default}}),o.raycaster=o.utility=o.objLoader=o.Events=o.Engine=o.matrixRender=o.matrixGeometry=o.matrixWorld=void 0;var r=h(t("./program/manifest")),i=d(t("./lib/matrix-world"));o.matrixWorld=i;i=d(t("./lib/matrix-geometry"));o.matrixGeometry=i;i=d(t("./lib/matrix-render"));o.matrixRender=i;i=d(t("./lib/engine"));o.Engine=i;i=d(t("./lib/events"));o.Events=i;i=d(t("./lib/loader-obj"));o.objLoader=i;var a=h(t("./lib/matrix-buffers")),n=h(t("./lib/matrix-textures")),i=d(t("./lib/utility"));o.utility=i;i=d(t("./lib/raycast"));o.raycaster=i;var s=h(t("./lib/matrix-bvh"));function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(l=function(t){return t?o:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=l(e);if(e&&e.has(t))return e.get(t);var o,r,i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&((r=a?Object.getOwnPropertyDescriptor(t,o):null)&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]);return i.default=t,e&&e.set(t,i),i}function h(t){return t&&t.__esModule?t:{default:t}}},{"./lib/engine":4,"./lib/events":5,"./lib/loader-obj":6,"./lib/matrix-buffers":7,"./lib/matrix-bvh":8,"./lib/matrix-geometry":10,"./lib/matrix-render":11,"./lib/matrix-textures":13,"./lib/matrix-world":14,"./lib/raycast":15,"./lib/utility":16,"./program/manifest":20}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.modifyLooper=function(t){r.looper=L=t},r.resizeView=x,r.initApp=function(t){x(),w(),window.canvas=document.getElementById("canvas"),1==a.default.events&&null===p&&(r.EVENTS_INSTANCE=p=new i.EVENTS((0,n.E)("canvas")));void 0!==t&&(window.webGLStartCallBack=t)()},r.isReady=function(){return 0!=world},r.load_shaders=async function(r){new Promise((t,e)=>{var o=new XMLHttpRequest;o.onload=function(){200==this.status&&null!=this.responseText?(document.getElementById("shaders").innerHTML=this.responseText,t()):(e(),console.warn("Something went wrong on shaders load procces!"))},o.open("GET",r,!0),o.send()})},r.loadHtmlPowerAsset=function(t,e){var o=new XMLHttpRequest;o.onload=function(){200==this.status&&null!=this.responseText&&(document.getElementById("media-holder").innerHTML=this.responseText,void 0!==e&&e())},o.open("GET",t,!0),o.send()},r.defineWebGLWorld=function(t){var e=new Object;try{var o=s.WebGLUtils.setupWebGL(canvas);o.viewportWidth=canvas.width,o.viewportHeight=canvas.height,e.gl=o}catch(t){}return e.destroy=function(){delete this.gl},e},r.updateFPS=function(t){var e=(new Date).getTime(),o=e-g;r.lastTime=g=e,r.totalTime=c+=o,r.updateTime=m+=o,(0,d.modifyFrames)(d.frames+1),r.updateFrames=f+=1,1e3<m&&(document.getElementById("fps").innerHTML="FPS AVG:"+Math.floor(1e3*d.frames/c/t)+" CUR:"+Math.floor(1e3*f/m/t+" matrixEngine"),r.updateTime=m=0,r.updateFrames=f=0)},r.drawCanvas=w,r.degToRad=function(t){return t*Math.PI/180},r.initiateFPS=function(){r.lastTime=g=(new Date).getTime()},r.onExit=b,r.loadShaders=function(t,e){var o,e=document.getElementById(e),r="";{if(e){for(var i=e.firstChild;i;)3==i.nodeType&&(r+=i.textContent),i=i.nextSibling;if("x-shader/x-fragment"==e.type)o=t.createShader(t.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=e.type)return 0;o=t.createShader(t.VERTEX_SHADER)}return t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)?o:0}return 0}},r.initShaders=function(t,e,o){var r=this.getShader(t,e),e=this.getShader(t,o);{if(0==r||0==e)return 0;o=t.createProgram();return t.attachShader(o,e),t.attachShader(o,r),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)?(t.useProgram(o),o.vertexPositionAttribute=t.getAttribLocation(o,"aVertexPosition"),t.enableVertexAttribArray(o.vertexPositionAttribute),0<=t.getAttribLocation(o,"aVertexColor")&&(o.vertexColorAttribute=t.getAttribLocation(o,"aVertexColor"),t.enableVertexAttribArray(o.vertexColorAttribute)),0<=t.getAttribLocation(o,"aTextureCoord")&&(o.textureCoordAttribute=t.getAttribLocation(o,"aTextureCoord"),t.enableVertexAttribArray(o.textureCoordAttribute),o.samplerUniform=t.getUniformLocation(o,"uSampler")),0<=t.getAttribLocation(o,"aVertexNormal")&&(o.vertexNormalAttribute=t.getAttribLocation(o,"aVertexNormal"),t.enableVertexAttribArray(o.vertexNormalAttribute)),null!==t.getUniformLocation(o,"uNMatrix")&&(o.nMatrixUniform=t.getUniformLocation(o,"uNMatrix")),null!==t.getUniformLocation(o,"layer")&&(o.layerLocation=t.getUniformLocation(o,"layer")),null!==t.getUniformLocation(o,"numberOfsamplers")&&(o.numberOfsamplers=t.getUniformLocation(o,"numberOfsamplers")),null!==t.getUniformLocation(o,"TimeFor")&&(o.uniformTime=t.getUniformLocation(o,"TimeFor")),null!==t.getUniformLocation(o,"uSampler")&&(o.samplerUniform=t.getUniformLocation(o,"uSampler")),null!==t.getUniformLocation(o,"uSampler1")&&(o.samplerUniform1=t.getUniformLocation(o,"uSampler1")),null!==t.getUniformLocation(o,"uSampler2")&&(o.samplerUniform2=t.getUniformLocation(o,"uSampler2")),null!==t.getUniformLocation(o,"uSampler3")&&(o.samplerUniform3=t.getUniformLocation(o,"uSampler3")),null!==t.getUniformLocation(o,"uSampler4")&&(o.samplerUniform3=t.getUniformLocation(o,"uSampler4")),null!==t.getUniformLocation(o,"uSampler5")&&(o.samplerUniform3=t.getUniformLocation(o,"uSampler5")),null!==t.getUniformLocation(o,"uSampler6")&&(o.samplerUniform3=t.getUniformLocation(o,"uSampler6")),null!==t.getUniformLocation(o,"uSampler7")&&(o.samplerUniform3=t.getUniformLocation(o,"uSampler7")),null!==t.getUniformLocation(o,"uUseLighting")&&(o.useLightingUniform=t.getUniformLocation(o,"uUseLighting")),null!==t.getUniformLocation(o,"uAmbientColor")&&(o.ambientColorUniform=t.getUniformLocation(o,"uAmbientColor")),null!==t.getUniformLocation(o,"uLightingDirection")&&(o.lightingDirectionUniform=t.getUniformLocation(o,"uLightingDirection")),null!==t.getUniformLocation(o,"uDirectionalColor")&&(o.directionalColorUniform=t.getUniformLocation(o,"uDirectionalColor")),o.pMatrixUniform=t.getUniformLocation(o,"uPMatrix"),o.mvMatrixUniform=t.getUniformLocation(o,"uMVMatrix"),o.fragmentShader=r,o.vertexShader=e,o):0}},r.SET_STREAM=E,r.ACCESS_CAMERA=function(t){var e=this;e.video=document.getElementById(t),E(e.video);var o=document.getElementById("HOLDER_STREAMS");e.videoImage=document.createElement("canvas"),e.videoImage.id=t+"IMAGE_",e.videoImage.setAttribute("width","512px"),e.videoImage.setAttribute("height","512px"),o.appendChild(e.videoImage),e.videoImageContext=e.videoImage.getContext("2d"),e.videoImageContext.fillStyle="#0000FF",e.videoImageContext.fillRect(0,0,e.videoImage.width,e.videoImage.height),e.texture=a.default.tools.loadVideoTexture("glVideoTexture",e.videoImage),e.UPDATE=function(){e.video.readyState===e.video.HAVE_ENOUGH_DATA&&(e.videoImageContext.drawImage(e.video,0,0,e.videoImage.width,e.videoImage.height),e.videoImageContext.font="30px Georgia",e.videoImageContext.fillStyle="black",e.videoImageContext.fillText(" Visual-JS game engine -webGL 2 part",0,85),e.videoImageContext.fillText("Video texture example ",20,50))},a.default.updateBeforeDraw.push(e)},r.VIDEO_TEXTURE=function(t){var e=this,o=document.getElementById("HOLDER_STREAMS");e.video=document.getElementById("webcam_beta"),e.video.READY=function(t){e.videoImage=document.createElement("canvas"),e.videoImage.id="webcam_betaIMAGE_",e.videoImage.setAttribute("width","512px"),e.videoImage.setAttribute("height","512px"),o.appendChild(e.videoImage),e.videoImageContext=e.videoImage.getContext("2d"),e.videoImageContext.fillStyle="#00003F",e.videoImageContext.fillRect(0,0,e.videoImage.width,e.videoImage.height),e.texture=a.default.tools.loadVideoTexture("glVideoTexture",e.videoImage),a.default.updateBeforeDraw.push(e)},e.video.addEventListener("loadeddata",e.video.READY,!1),e.video.src="res/videos/"+t,e.UPDATE=function(){e.video.readyState===e.video.HAVE_ENOUGH_DATA&&(e.videoImageContext.drawImage(e.video,0,0,e.videoImage.width,e.videoImage.height),e.videoImageContext.font="30px Georgia",e.videoImageContext.fillStyle="black",e.videoImageContext.fillText(" Visual-JS game engine -webGL 2 part",0,85),e.videoImageContext.fillText("Video texture example ",20,50))}},r.Vjs3=function(t,e){var o=this;o.iframe=document.createElement("object"),o.iframe.id=e,o.iframe.setAttribute("style","width:512px;height:512px");var r=document.getElementById("HOLDER_STREAMS");o.iframe.data=t,r.appendChild(o.iframe),document.getElementById(o.iframe.id).onload=function(t){o.videoImage=o.iframe.contentDocument.getElementById(e),o.canvasTexture=o.videoImage.getContext("2d"),a.default.scene.outsideBox.streamTextures.iframe.contentWindow.runTextureEditor(e),(0,n.E)("HOLDER_STREAMS").style.display="block",o.texture=a.default.tools.loadVideoTexture("glVideoTexture",o.videoImage)},o.showTextureEditor=function(){var t=(0,n.E)("HOLDER_STREAMS").style;t.display="block",t.left="0"}},r.anyCanvas=function(t,e){var o=this;o.iframe=document.createElement("object"),o.iframe.id="canvas2dTextureSurface"+document.getElementsByTagName("object").length,o.iframe.setAttribute("width","512"),o.iframe.setAttribute("height","512"),document.getElementById("HOLDER_STREAMS").appendChild(o.iframe),document.getElementById(o.iframe.id).onload=t=>{o.videoImage=o.iframe.contentDocument.getElementById(e),void 0!==o.iframe.contentWindow.runTextureEditor&&a.default.scene.outsideBox.streamTextures.iframe.contentWindow.runTextureEditor(e),o.canvasTexture=o.videoImage.getContext("2d"),(0,n.E)("HOLDER_STREAMS").style.display="block",o.texture=a.default.tools.loadVideoTexture("glVideoTexture",o.videoImage)},o.showTextureEditor=function(){var t=(0,n.E)("HOLDER_STREAMS").style;t.display="block",t.left="0"},o.iframe.data=t},r.webcamError=r.RegenerateShader=r.looper=r.EVENTS_INSTANCE=r.updateFrames=r.updateTime=r.totalTime=r.lastTime=r.ht=r.wd=void 0;var o,i=t("./events"),a=(o=t("../program/manifest"))&&o.__esModule?o:{default:o},n=t("./utility"),s=t("./webgl-utils"),l=t("./matrix-render"),d=t("./matrix-world");var h=0,u=0,g=0,c=0,m=0,f=0;r.updateFrames=f,r.updateTime=m,r.totalTime=c,r.lastTime=g,r.ht=u,r.wd=h;let p=null;r.EVENTS_INSTANCE=p;let L=0;function x(){r.wd=h=document.body.clientWidth-4,document.body.clientHeight>document.documentElement.clientHeight?r.ht=u=document.body.clientHeight-10:r.ht=u=document.documentElement.clientHeight-4}function w(){var t=document.createElement("canvas");t.id="canvas","full-screen"==a.default.resize.canvas?(t.width=window.innerWidth,t.height=window.innerHeight,i.SYS.DEBUG.LOG("SYS: fullscreen diametric resize is active. ")):(t.width=window.innerHeight*a.default.resize.aspectRatio,t.height=window.innerHeight,i.SYS.DEBUG.LOG("SYS: aspect ration resize is active. ")),document.body.append(t)}function b(){for(r.looper=L=0;L<=d.objListToDispose.length-1;)d.objListToDispose[L].destroy(),r.looper=L+=1;d.objListToDispose.length=0}r.looper=L,window.onbeforeunload=b,window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(t){window.clearTimeout(t)},a.default.operation.destroyWorld=function(){for(cancelRequestAnimFrame(l.reDrawID),delete this.pMatrix,delete this.mvMatrixStack,r.looper=L=0;L<=this.contentList.length-1;){if(delete this.contentList[L].type,delete this.contentList[L].size,delete this.contentList[L].sides,this.contentList[L].shaderProgram.fragmentShader&&(this.GL.gl.deleteShader(this.contentList[L].shaderProgram.fragmentShader),delete this.contentList[L].shaderProgram.fragmentShader),this.contentList[L].shaderProgram.vertexShader&&(this.GL.gl.deleteShader(this.contentList[L].shaderProgram.vertexShader),delete this.contentList[L].shaderProgram.vertexShader),this.contentList[L].texture){try{this.GL.gl.deleteTexture(this.contentList[L].texture)}catch(t){i.SYS.DEBUG.WARNING("Problem in destroying function : This is e log : "+t)}delete this.contentList[L].texture}this.contentList[L].shaderProgram&&(this.GL.gl.deleteProgram(this.contentList[L].shaderProgram),delete this.contentList[L].shaderProgram),this.contentList[L].vertexPositionBuffer&&(this.GL.gl.deleteBuffer(this.contentList[L].vertexPositionBuffer),delete this.contentList[L].vertexPositionBuffer),this.contentList[L].vertexTexCoordBuffer&&(this.GL.gl.deleteBuffer(this.contentList[L].vertexTexCoordBuffer),delete this.contentList[L].vertexTexCoordBuffer),this.contentList[L].vertexColorBuffer&&(this.GL.gl.deleteBuffer(this.contentList[L].vertexColorBuffer),delete this.contentList[L].vertexColorBuffer),this.contentList[L].vertexIndexBuffer&&(this.GL.gl.deleteBuffer(this.contentList[L].vertexIndexBuffer),delete this.contentList[L].vertexIndexBuffer),delete this.contentList[L].rotation,delete this.contentList[L].color,delete this.contentList[L].mvMatrix,r.looper=L+=1}this.contentList.length=0,this.GL.destroy(),i.SYS.DEBUG.WARNING("exit")},a.default.operation.PUSH_MATRIX=function(t,e){var o=mat4.create();mat4.copy(t,o),e.push(o)},a.default.operation.POP_MATRIX=function(t,e){if(0==e.length)throw"Invalid popMatrix!";e.pop()},a.default.operation.SET_MATRIX_UNIFORMS=function(t,e){this.GL.gl.uniformMatrix4fv(t.shaderProgram.pMatrixUniform,!1,e),this.GL.gl.uniformMatrix4fv(t.shaderProgram.mvMatrixUniform,!1,t.mvMatrix)};r.RegenerateShader=function(t,e,o){t=document.getElementById(t);"multiply"==o?o=0:"divide"==o&&(o=1),t.innerHTML=`

    // shader for ${e} textures
    precision mediump float;
    precision highp float;


    varying vec2 vTextureCoord;
    varying vec3 vLightWeighting;

    uniform float textureSamplerAmount[${e}];
    int MixOperandString = ${o};

    uniform sampler2D uSampler;
    uniform sampler2D uSampler1;
    uniform sampler2D uSampler2;
    uniform sampler2D uSampler3;
    uniform sampler2D uSampler4;
    uniform sampler2D uSampler5;
    uniform sampler2D uSampler6;
    uniform sampler2D uSampler7;

    void main(void) {

        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor1 = texture2D(uSampler1, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor2 = texture2D(uSampler2, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor3 = texture2D(uSampler3, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor4 = texture2D(uSampler4, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor5 = texture2D(uSampler5, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor6 = texture2D(uSampler6, vec2(vTextureCoord.s, vTextureCoord.t));
        vec4 textureColor7 = texture2D(uSampler7, vec2(vTextureCoord.s, vTextureCoord.t));

        //MixOperandString  make it with eval todo task

        if (  ${e} == 1)
            {

                  gl_FragColor      = vec4(textureColor.rgb * vLightWeighting, textureColor.a);

              //  gl_FragColor = vec4( smoothstep(textureColor.r, textureColor.b,textureColor.g ) , smoothstep(textureColor.r, textureColor.b,textureColor.g ) ,0 ,smoothstep(textureColor.r, textureColor.b,textureColor.g ) );

            }
        else if (${e} == 2)
            {
                if ( ${o} == 0){
                 // gl_FragColor = textureColor * textureColor1;

                  gl_FragColor      = vec4( (textureColor.rgb * textureColor1.rgb) * vLightWeighting, textureColor.a);
                }
                else if (${o} == 1){

                //gl_FragColor = textureColor / textureColor1;
                  gl_FragColor      = vec4( (textureColor.rgb / textureColor1.rgb) * vLightWeighting, textureColor.a);
                }

            }
        else if (${e} == 3)
            {
                if (MixOperandString == 0){
                    gl_FragColor =vec4( (textureColor.rgb * textureColor1.rgb * textureColor2.rgb ) * vLightWeighting, textureColor.a);
                }
                else if (MixOperandString == 1){
                    gl_FragColor = vec4( (textureColor.rgb * textureColor1.rgb / textureColor2.rgb ) * vLightWeighting, textureColor.a);
                }

            }
        else if (${e} == 4)
        {
            if (MixOperandString == 0){
                gl_FragColor = textureColor * textureColor1 * textureColor2 * textureColor3;
            }
            else if (MixOperandString == 1){
                gl_FragColor = textureColor / textureColor1 / textureColor2 /  textureColor3;
            }

        }

    }

   // uniform sampler2D uSampler[${e}];
   // uniform float uMixAmount[${e}];

    /*
    void main() {
        vec4 color = vec4(0);

        for (int i = 0; i < ${e}; ++i) {
            vec4 texColor = texture2D(uSampler[i], vTextureCoord);
            color = mix(color, texColor, uMixAmount[i]);
        }

        gl_FragColor = color;
    }
    */

    `};var A=function(t){alert("Webcam error!"+t)};function E(o){navigator.getUserMedia?navigator.getUserMedia({audio:!0,video:!0},function(e){try{o.srcObject=e}catch(t){o.src=window.URL.createObjectURL(e)}},A):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia({audio:!0,video:!0},function(e){try{o.srcObject=e}catch(t){o.src=window.URL.createObjectURL(e)}},A):alert("webcam broken.")}r.webcamError=A},{"../program/manifest":20,"./events":5,"./matrix-render":11,"./matrix-world":14,"./utility":16,"./webgl-utils":17}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.EVENTS=function(e){var o=this;0==NOMOBILE?(e.addEventListener("touchstart",function(t){t.preventDefault();t=t.changedTouches;s.MOUSE.PRESS=!0,s.MOUSE.x=t[0].pageX,s.MOUSE.y=t[0].pageY,o.CALCULATE_TOUCH_OR_CLICK()},{passive:!1}),e.addEventListener("touchend",function(t){t.preventDefault();t=t.changedTouches;s.MOUSE.PRESS=!1,s.MOUSE.x=t[0].pageX,s.MOUSE.y=t[0].pageY,o.CALCULATE_TOUCH_UP_OR_MOUSE_UP()},{passive:!1}),e.addEventListener("touchcancel",function(t){t.preventDefault();t=t.changedTouches;s.MOUSE.PRESS=!1,s.MOUSE.x=t[0].pageX,s.MOUSE.y=t[0].pageY,o.CALCULATE_TOUCH_UP_OR_MOUSE_UP()},{passive:!1}),e.addEventListener("touchmove",function(t){t.preventDefault();t=t.changedTouches;s.MOUSE.x=t[0].pageX,s.MOUSE.y=t[0].pageY,o.CALCULATE_TOUCH_MOVE_OR_MOUSE_MOVE()},{passive:!1})):(e.addEventListener("click",function(t){s.MOUSE.x=t.layerX,s.MOUSE.y=t.layerY,o.CALCULATE_TOUCH_OR_CLICK(),s.DEBUG.LOG("SYS : CLICK EVENT "+e)},{passive:!0}),e.addEventListener("mouseup",function(t){s.MOUSE.PRESS=!1,s.MOUSE.BUTTON_PRESSED=null,s.MOUSE.x=t.layerX,s.MOUSE.y=t.layerY,o.CALCULATE_TOUCH_UP_OR_MOUSE_UP()},{passive:!0}),e.onmousemove=function(t){s.MOUSE.MOUSE_MOVING=!0,s.MOUSE.x=t.layerX,s.MOUSE.y=t.layerY,o.CALCULATE_TOUCH_MOVE_OR_MOUSE_MOVE(t)},e.onmousedown=function(t){s.MOUSE.PRESS=!0,3==t.which?(s.MOUSE.BUTTON_PRESSED="RIGHT",s.MOUSE.ON_RIGHT_BTN_PRESSED(),s.DEBUG.LOG("Right button clicked")):2==t.which?(s.MOUSE.BUTTON_PRESSED="MID",s.MOUSE.ON_MID_BTN_PRESSED(),s.DEBUG.LOG("Mid button clicked")):1==t.which&&(s.MOUSE.BUTTON_PRESSED="LEFT",s.MOUSE.ON_LEFT_BTN_PRESSED(),s.DEBUG.LOG("Left button clicked")),s.MOUSE.x=t.layerX,s.MOUSE.y=t.layerY,o.CALCULATE_TOUCH_DOWN_OR_MOUSE_DOWN()});window.addEventListener("resize",function(t){"full-screen"==a.default.resize.canvas?(e.width=window.innerWidth,e.height=window.innerHeight,s.DEBUG.LOG("SYS: fullscreen diametric resize is active. "+i.world)):(e.width=window.innerHeight*a.default.resize.aspectRatio,e.height=window.innerHeight,s.DEBUG.LOG("SYS: aspect ration resize is active. "+i.world)),1==a.default.resize.reloadWorldOnResize&&"undefined"!==window.resizeGlPort&&window.resizeGlPort()},{passive:!0}),this.CALCULATE_TOUCH_OR_CLICK=function(){s.DEBUG.LOG(" EVENT : MOUSE/TOUCH CLICK ")},this.CALCULATE_TOUCH_MOVE_OR_MOUSE_MOVE=function(t){var e,o,r=window.innerWidth/2,i=window.innerHeight/2;s.MOUSE.x=t.layerX-r,s.MOUSE.y=t.layerY-i,void 0!==s.MOUSE.LAST_POSITION.x&&(e=s.MOUSE.LAST_POSITION.x-s.MOUSE.x,o=s.MOUSE.LAST_POSITION.y-s.MOUSE.y,Math.abs(e)>Math.abs(o)&&0<e||Math.abs(e)>Math.abs(o)&&e<0||Math.abs(o)>Math.abs(e)&&0<o||(Math.abs(o),Math.abs(e))),d.pitchRate+=10*o,d.yawRate+=+e,s.MOUSE.LAST_POSITION.x=s.MOUSE.x,s.MOUSE.LAST_POSITION.y=s.MOUSE.y,s.MOUSE.x<a.default.camera.edgeMarginValue-r?a.default.camera.leftEdge=!0:a.default.camera.leftEdge=!1,s.MOUSE.x>r-a.default.camera.edgeMarginValue?a.default.camera.rightEdge=!0:a.default.camera.rightEdge=!1},this.CALCULATE_TOUCH_UP_OR_MOUSE_UP=function(){},this.CALCULATE_TOUCH_DOWN_OR_MOUSE_DOWN=function(){}},o.defineKeyBoardObject=l,o.keyboardPress=o.camera=o.SYS=void 0;var r,a=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},i=t("./matrix-world"),n=t("./utility");var s={};function l(){var e=new Object;return e.keyArr=new Array,document.onkeydown=function(t){e.handleKeyDown(t)},document.onkeyup=function(t){e.handleKeyUp(t)},e.getKeyStatus=function(t){return this.keyArr[t]},e.setKeyStatus=function(t,e){this.keyArr[t]=e},e.handleKeyDown=function(t){t=t||window.event||"",this.setKeyStatus(t.keyCode,!0)},e.handleKeyUp=function(t){t=t||window.event||"",this.setKeyStatus(t.keyCode,!1)},e.destroy=function(){printLog("    Destroy Key Press object"),document.onkeydown=null,document.onkeyup=null,delete this.keyArr},e}(o.SYS=s).MOUSE={x:0,y:0,LAST_POSITION:{x:0,y:0},PRESS:!1,BUTTON_PRESSED:"",ON_LEFT_BTN_PRESSED:function(){},ON_RIGHT_BTN_PRESSED:function(){},ON_MID_BTN_PRESSED:function(){},MOUSE_MOVING:!1},s.DEBUG=new n.LOG;var d=new Object;(o.camera=d).pitch=0,d.pitchRate=0,d.yaw=0,d.yawRate=0,d.xPos=0,d.yPos=0,d.zPos=0,d.speed=0,d.yawAmp=.05,d.pitchAmp=.007;var h=l();o.keyboardPress=h,d.setCamera=function(t){h.getKeyStatus(37)||h.getKeyStatus(65)||1==a.default.camera.leftEdge?(d.yawRate=20,1==a.default.camera.leftEdge&&(d.yawRate=10)):(h.getKeyStatus(39)||h.getKeyStatus(68)||1==a.default.camera.rightEdge)&&(d.yawRate=-20,1==a.default.camera.rightEdge&&(d.yawRate=-10)),h.getKeyStatus(38)||h.getKeyStatus(87)?d.speed=a.default.camera.speedAmp:h.getKeyStatus(40)||h.getKeyStatus(83)?d.speed=-a.default.camera.speedAmp:d.speed=0,0!=d.speed&&(d.xPos-=Math.sin(degToRad(d.yaw))*d.speed,d.yPos=0,d.zPos-=Math.cos(degToRad(d.yaw))*d.speed),d.yaw+=d.yawRate*d.yawAmp,d.pitch+=d.pitchRate*d.pitchAmp,mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(-d.pitch),[1,0,0]),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(-d.yaw),[0,1,0]),mat4.translate(t.mvMatrix,t.mvMatrix,[-d.xPos,-d.yPos,-d.zPos]),d.yawRate=0,d.pitchRate=0};let u=document.querySelector(".button1"),g=document.querySelector(".button2");if(g.addEventListener("click",()=>{u.style.display="none",g.style.display="none"}),document.addEventListener("appinstalled",t=>{console.log("PWA app installed by user!!! Hurray")}),!0===a.default.pwa.addToHomePage){let e;window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t,u.style.display="block",g.style.display="block",u.addEventListener("click",()=>{u.style.display="none",e.prompt(),e.userChoice.then(t=>{"accepted"===t.outcome?(console.log("User accepted the A2HS prompt"),u.style.display="none",g.style.display="none"):(console.log("User dismissed the A2HS prompt"),u.style.display="none"),e=null})})})}else try{u.style.display="none",g.style.display="none"}catch(t){}},{"../program/manifest":20,"./matrix-world":14,"./utility":16}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.deleteMeshBuffers=o.initMeshBuffers=o.downloadMeshes=o.constructMesh=void 0;var r=t("./matrix-world");class l{constructor(t,e){this.objectData=t,this.create(t,e),this.setScale=t=>{a(r.world.GL.gl,this.create(this.objectData,{scale:t}))}}create=(t,e,o)=>{void 0===o&&(o=function(){});for(var r=[],i=[],a=[],n={verts:[],norms:[],textures:[],hashindices:{},indices:[],index:0},s=t.split("\n"),l=/^v\s/,d=/^vn\s/,h=/^vt\s/,u=/^f\s/,g=/\s+/,c=0;c<s.length;c++){var m=s[c].trim(),f=m.split(g);if(f.shift(),l.test(m))r.push.apply(r,f);else if(d.test(m))i.push.apply(i,f);else if(h.test(m))a.push.apply(a,f);else if(u.test(m))for(var p,L=!1,x=0,w=f.length;x<w;x++)3!==x||L||(x=2,L=!0),f[x]in n.hashindices?n.indices.push(n.hashindices[f[x]]):(p=f[x].split("/"),n.verts.push(+r[3*(p[0]-1)+0]*e.scale),n.verts.push(+r[3*(p[0]-1)+1]*e.scale),n.verts.push(+r[3*(p[0]-1)+2]*e.scale),a.length&&(n.textures.push(+a[2*(p[1]-1)+0]),n.textures.push(+a[2*(p[1]-1)+1])),n.norms.push(+i[3*(p[2]-1)+0]),n.norms.push(+i[3*(p[2]-1)+1]),n.norms.push(+i[3*(p[2]-1)+2]),n.hashindices[f[x]]=n.index,n.indices.push(n.index),n.index+=1),3===x&&L&&n.indices.push(n.hashindices[f[0]])}return this.vertices=n.verts,this.vertexNormals=n.norms,this.textures=n.textures,this.indices=n.indices,o(),this}}o.constructMesh=l;function d(){var o=this;this.xmlhttp=new XMLHttpRequest,this.get=function(t,e){o.xmlhttp.onreadystatechange=function(){4===o.xmlhttp.readyState&&e(o.xmlhttp.responseText,o.xmlhttp.status)},o.xmlhttp.open("GET",t,!0),o.xmlhttp.send()}}o.downloadMeshes=function(t,r,i){var a=Object.keys(t).length,n=!1;void 0===i&&(i={scale:1});var e,s={};for(e in t)t.hasOwnProperty(e)&&(new d).get(t[e],function(o){return function(t,e){if(200===e?s[o]=new l(t,i):(n=!0,console.error('An error has occurred and the mesh "'+o+'" could not be downloaded.')),0===--a){if(n)throw console.error("An error has occurred and one or meshes has not been downloaded. The execution of the script has terminated."),"";r(s)}}}(e))};function i(t,e,o,r){var i=t.createBuffer(),a=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,i),t.bufferData(e,new a(o),t.STATIC_DRAW),i.itemSize=r,i.numItems=o.length/r,i}var a=function(t,e){e.normalBuffer=i(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=i(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=i(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=i(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)};o.initMeshBuffers=a;o.deleteMeshBuffers=function(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)}},{"./matrix-world":14}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r,i=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},a=t("./matrix-world");i.default.operation.cube_buffer_procedure=function(t){t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=24,t.color&&null!==t.shaderProgram.vertexColorAttribute&&(t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.color,a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=4,t.vertexColorBuffer.numItems=24),t.texture&&(t.vertexTexCoordBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,a.world.GL.gl.STATIC_DRAW),t.vertexTexCoordBuffer.itemSize=2,t.vertexTexCoordBuffer.numItems=24),t.shaderProgram.useLightingUniform&&(t.vertexNormalBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.LightMap,a.world.GL.gl.STATIC_DRAW),t.vertexNormalBuffer.itemSize=3,t.vertexNormalBuffer.numItems=24),t.vertexIndexBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.geometry.indices),a.world.GL.gl.STATIC_DRAW),t.vertexIndexBuffer.itemSize=1,t.vertexIndexBuffer.numItems=36},i.default.operation.piramide_buffer_procedure=function(t){t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=18,t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.color,a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=4,t.vertexColorBuffer.numItems=18},i.default.operation.square_buffer_procedure=function(t){t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=4,t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,new Float32Array(t.geometry.color),a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=4,t.vertexColorBuffer.numItems=t.geometry.colorData.color.length},i.default.operation.triangle_buffer_procedure=function(t){t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=3,t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,new Float32Array(t.color),a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=4,t.vertexColorBuffer.numItems=3},i.default.operation.obj_buffer_procedure=function(t){if(t.color&&null!==t.shaderProgram.vertexColorAttribute){t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer);var e,o=[];for(e in t.color)for(var r=t.color[e],i=0;i<4;)o=o.concat(r),i+=1;a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,new Float32Array(o),a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=4,t.vertexColorBuffer.numItems=4}t.shaderProgram.useLightingUniform&&a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.mesh.normalBuffer,a.world.GL.gl.STATIC_DRAW)},i.default.operation.squareTex_buffer_procedure=function(t){if(t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=4,t.color&&null!==t.shaderProgram.vertexColorAttribute){t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer);var e,o=[];for(e in t.color)for(var r=t.color[e],i=0;i<4;)o=o.concat(r),i+=1;a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,new Float32Array(o),a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=3,t.vertexColorBuffer.numItems=4}t.texture&&(t.vertexTexCoordBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,a.world.GL.gl.STATIC_DRAW),t.vertexTexCoordBuffer.itemSize=2,t.vertexTexCoordBuffer.numItems=4),t.shaderProgram.useLightingUniform&&(t.vertexNormalBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.LightMap,a.world.GL.gl.STATIC_DRAW),t.vertexNormalBuffer.itemSize=4,t.vertexNormalBuffer.numItems=4),t.vertexIndexBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.geometry.indices),a.world.GL.gl.STATIC_DRAW),t.vertexIndexBuffer.itemSize=1,t.vertexIndexBuffer.numItems=6},i.default.operation.sphere_buffer_procedure=function(t){if(t.vertexPositionBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,a.world.GL.gl.STATIC_DRAW),t.vertexPositionBuffer.itemSize=3,t.vertexPositionBuffer.numItems=t.geometry.vertexPositionData.length/3,t.color&&null!==t.shaderProgram.vertexColorAttribute){t.vertexColorBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer);var e,o=[];for(e in t.color)for(var r=t.color[e],i=0;i<4;)o=o.concat(r),i+=1;a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,new Float32Array(o),a.world.GL.gl.STATIC_DRAW),t.vertexColorBuffer.itemSize=3,t.vertexColorBuffer.numItems=t.geometry.normalData.length/3}t.texture&&(t.vertexTexCoordBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,a.world.GL.gl.STATIC_DRAW),t.vertexTexCoordBuffer.itemSize=2,t.vertexTexCoordBuffer.numItems=t.geometry.textureCoordData.length/2),t.shaderProgram.useLightingUniform&&(t.vertexNormalBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ARRAY_BUFFER,t.geometry.normals,a.world.GL.gl.STATIC_DRAW),t.vertexNormalBuffer.itemSize=3,t.vertexNormalBuffer.numItems=t.geometry.normalData.length/3),t.vertexIndexBuffer=a.world.GL.gl.createBuffer(),a.world.GL.gl.bindBuffer(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),a.world.GL.gl.bufferData(a.world.GL.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.geometry.indices),a.world.GL.gl.STATIC_DRAW),t.vertexIndexBuffer.itemSize=1,t.vertexIndexBuffer.numItems=t.geometry.indexData.length};i=i.default.operation;o.default=i},{"../program/manifest":20,"./matrix-world":14}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r,i=(r=t("../node_modules/bvh-loader/index"))&&r.__esModule?r:{default:r},a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=s(e);if(e&&e.has(t))return e.get(t);var o,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t){var a;"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&((a=i?Object.getOwnPropertyDescriptor(t,o):null)&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o])}r.default=t,e&&e.set(t,r);return r}(t("./matrix-world")),n=t("./utility");function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(s=function(t){return t?o:e})(t)}o.default=class{constructor(t,e){void 0!==e&&void 0!==e.world?(void 0===e.skeletalBoneScale&&(e.skeletalBoneScale=.3),void 0===e.loop&&(e.loop=!0),void 0===e.showOnLoad&&(e.showOnLoad=!0),void 0===e.type&&(e.type="ME-SKELETAL_POINT_BASE"),void 0===e.autoPlay&&(e.autoPlay=!0),void 0===e.boneNameBasePrefix&&(e.boneNameBasePrefix="MatrixSkeletalBone"),void 0===e.globalOffset&&(e.globalOffset=[0,0,0]),void 0===e.myFrameRate&&(e.myFrameRate=125),this.options=e,this.world=e.world,this.globalOffset=e.globalOffset,this.anim=new i.default,this.tPose=null,this.skeletalKeys=null,this.animation=null,this.animationTimer=null,this.actualFrame=1,this.isConstructed=!1,this.anim.parse_file(t).then(()=>{this.tPose=this.anim.frame_pose(0),this.tPosition=this.tPose[0],this.tRotation=this.tPose[1],this.skeletalKeys=this.anim.joint_names(),this.animation=this.anim.all_frame_poses(),this.sumOfFrames=this.animation[0].length-1,this.loopInverse=new n.OSCILLATOR(1,this.sumOfFrames,1),1==e.autoPlay?"TPOSE"===e.type?this.constructSkeletalTPose():this.playAnimation():1==e.showOnLoad&&("TPOSE"===e.type?this.constructSkeletalTPose():this.constructFirstFrame(this.options))})):console.error("MEBvhAnimation class error: No second argument options || possible world is not passed.")}constructSkeletalTPose(){0==this.isConstructed&&this.constructSkeletal(this.options);for(var t=0;t<this.tPosition.length;t++){var e=this.options.boneNameBasePrefix+this.skeletalKeys[t];App.scene[e].position.SetX(this.tPosition[t][0]+this.globalOffset[0]),App.scene[e].position.SetY(this.tPosition[t][1]+this.globalOffset[1]),App.scene[e].position.SetZ(this.tPosition[t][2]+this.globalOffset[2]),App.scene[e].rotation.rotateX(this.tRotation[t][0]),App.scene[e].rotation.rotateY(this.tRotation[t][1]),App.scene[e].rotation.rotateZ(this.tRotation[t][2])}}accessBonesObject(){let e=[];return a.objListToDispose[0].contentList.forEach(t=>{-1!=t.name.indexOf(this.options.boneNameBasePrefix)&&e.push(t)}),e}constructSkeletal(){for(var t=0;t<this.tPosition.length;t++){var e,o=this.options.boneNameBasePrefix+this.skeletalKeys[t];void 0!==this.options.boneTex?(e=void 0===this.options.drawTypeBone?"cubeLightTex":this.options.drawTypeBone,this.world.Add(e,this.options.skeletalBoneScale,o,this.options.boneTex)):this.world.Add("cube",this.options.skeletalBoneScale,o)}if(this.isConstructed=!0,void 0!==this.options.skeletalBlend)for(t=0;t<this.tPosition.length;t++){o=this.options.boneNameBasePrefix+this.skeletalKeys[t];App.scene[o].glBlend.blendEnabled=!0,App.scene[o].glBlend.blendParamSrc=matrixEngine.utility.ENUMERATORS.glBlend.param[this.options.skeletalBlend.paramSrc],App.scene[o].glBlend.blendParamDest=matrixEngine.utility.ENUMERATORS.glBlend.param[this.options.skeletalBlend.paramDest]}}constructFirstFrame(){0==this.isConstructed&&this.constructSkeletal();for(var t=0;t<this.tPosition.length;t++){var e=this.options.boneNameBasePrefix+this.skeletalKeys[t];App.scene[e].position.SetX(this.animation[0][1][t][0]+this.globalOffset[0]),App.scene[e].position.SetY(this.animation[0][1][t][1]+this.globalOffset[1]),App.scene[e].position.SetZ(this.animation[0][1][t][2]+this.globalOffset[2]),App.scene[e].rotation.rotateX(this.animation[1][1][t][0]),App.scene[e].rotation.rotateY(this.animation[1][1][t][1]),App.scene[e].rotation.rotateZ(this.animation[1][1][t][2])}}playAnimation(){0==this.isConstructed&&this.constructFirstFrame(this.options),null==this.animationTimer?this.animationTimer=setInterval(()=>{for(var t=0;t<this.tPosition.length;t++){var e=this.options.boneNameBasePrefix+this.skeletalKeys[t];App.scene[e].position.SetX(this.animation[0][this.actualFrame][t][0]+this.globalOffset[0]),App.scene[e].position.SetY(this.animation[0][this.actualFrame][t][1]+this.globalOffset[1]),App.scene[e].position.SetZ(this.animation[0][this.actualFrame][t][2]+this.globalOffset[2]),App.scene[e].rotation.rotateX(this.animation[1][1][t][0]),App.scene[e].rotation.rotateY(this.animation[1][1][t][1]),App.scene[e].rotation.rotateZ(this.animation[1][1][t][2])}"playInverse"==this.options.loop?this.actualFrame=this.loopInverse.UPDATE():this.actualFrame++,this.actualFrame>=this.animation[0].length-1&&(1==this.options.loop?this.actualFrame=1:"stopOnEnd"==this.options.loop?this.stopAnimation():"stopAndReset"==this.options.loop&&(this.constructFirstFrame(),this.actualFrame=1,this.stopAnimation()))},this.options.myFrameRate):console.warn("MEBvhAnimation: Animation already play.")}stopAnimation(){clearInterval(this.animationTimer),this.animationTimer=null}}},{"../node_modules/bvh-loader/index":18,"./matrix-world":14,"./utility":16}],9:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r,a=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},n=t("./matrix-world"),s=t("./events"),l=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=d(e);if(e&&e.has(t))return e.get(t);var o,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t){var a;"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&((a=i?Object.getOwnPropertyDescriptor(t,o):null)&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o])}r.default=t,e&&e.set(t,r);return r}(t("./raycast"));function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(d=function(t){return t?o:e})(t)}a.default.operation.draws=new Object,a.default.operation.draws.cube=function(t){var e,o,r=0;if(mat4.identity(t.mvMatrix),this.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),l.checkingProcedureCalc&&l.checkingProcedureCalc(t),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),t.vertexPositionBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexPositionAttribute),r+=1),t.vertexColorBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexColorAttribute),r+=1),t.shaderProgram.useLightingUniform?(n.world.GL.gl.uniform1i(t.shaderProgram.useLightingUniform,!0),t.vertexNormalBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexNormalAttribute,t.vertexNormalBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexNormalAttribute),r+=1),t.shaderProgram.ambientColorUniform&&(document.getElementById("ambLightR")?n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(document.getElementById("ambLightR").getAttribute("value")),parseFloat(document.getElementById("ambLightG").getAttribute("value")),parseFloat(document.getElementById("ambLightB").getAttribute("value"))):n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,t.LightsData.ambientLight.r,t.LightsData.ambientLight.g,t.LightsData.ambientLight.b)),t.shaderProgram.directionalColorUniform&&(document.getElementById("dirLightR")?n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(document.getElementById("dirLightR").getAttribute("value")),parseFloat(document.getElementById("dirLightG").getAttribute("value")),parseFloat(document.getElementById("dirLightB").getAttribute("value"))):n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,t.LightsData.directionLight.R(),t.LightsData.directionLight.G(),t.LightsData.directionLight.B())),e=null,t.shaderProgram.lightingDirectionUniform&&(e=document.getElementById("dirX")&&document.getElementById("dirY")&&document.getElementById("dirZ")?[parseFloat(document.getElementById("dirX").getAttribute("value")),parseFloat(document.getElementById("dirY").getAttribute("value")),parseFloat(document.getElementById("dirZ").getAttribute("value"))]:[t.LightsData.lightingDirection.r,t.LightsData.lightingDirection.g,t.LightsData.lightingDirection.b],o=vec3.create(),vec3.normalize(o,e),vec3.scale(o,o,-1),n.world.GL.gl.uniform3fv(t.shaderProgram.lightingDirectionUniform,o))):t.shaderProgram.useLightingUniform&&(t.shaderProgram.ambientColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(.2),parseFloat(.2),parseFloat(.2)),t.shaderProgram.directionalColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(1),parseFloat(0),parseFloat(0))),t.vertexTexCoordBuffer){if(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.textureCoordAttribute,t.vertexTexCoordBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.textureCoordAttribute),null!=t.streamTextures)a.default.tools.loadVideoTexture("glVideoTexture",t.streamTextures.videoImage),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,0);else for(var i=0;i<t.textures.length;i++)null==t.custom.gl_texture?(n.world.GL.gl.activeTexture(n.world.GL.gl["TEXTURE"+i]),n.world.GL.gl.bindTexture(n.world.GL.gl.TEXTURE_2D,t.textures[i]),n.world.GL.gl.pixelStorei(n.world.GL.gl.UNPACK_FLIP_Y_WEBGL,!1),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MAG_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MIN_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_S,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_T,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,i)):t.custom.gl_texture(t,i);r+=1}n.world.GL.gl.bindBuffer(n.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),n.world.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),t.vertexNormalBuffer&&t.shaderProgram.nMatrixUniform&&(o=mat3.create(),mat3.normalFromMat4(o,t.mvMatrix),mat3.transpose(o,o),n.world.GL.gl.uniformMatrix3fv(t.shaderProgram.nMatrixUniform,!1,o)),n.world.disableUnusedAttr(n.world.GL.gl,r),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),n.world.GL.gl.drawElements(n.world.GL.gl[t.glDrawElements.mode],t.glDrawElements.numberOfIndicesRender,n.world.GL.gl.UNSIGNED_SHORT,0),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.piramide=function(t){mat4.identity(t.mvMatrix),n.world.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),l.checkingProcedureCalc&&l.checkingProcedureCalc(t),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),1==t.geometry.dynamicBuffer?(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW)):n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),t.vertexColorBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0)),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),n.world.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),n.world.GL.gl.drawArrays(n.world.GL.gl[t.glDrawElements.mode],0,t.vertexPositionBuffer.numItems),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.square=function(t){mat4.identity(t.mvMatrix),n.world.mvPushMatrix(t.mvMatrix,n.world.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),l.checkingProcedureCalc&&l.checkingProcedureCalc(t),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),1==t.geometry.dynamicBuffer?(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW)):n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),t.vertexColorBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0)),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),n.world.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),n.world.GL.gl.drawArrays(n.world.GL.gl[t.glDrawElements.mode],0,t.vertexPositionBuffer.numItems),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.triangle=function(t){mat4.identity(t.mvMatrix),n.world.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),l.checkingProcedureCalc&&l.checkingProcedureCalc(t),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),this.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),n.world.GL.gl.drawArrays(n.world.GL.gl[t.glDrawElements.mode],0,t.vertexPositionBuffer.numItems),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.drawObj=function(t){var e,o;if(mat4.identity(t.mvMatrix),n.world.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),void 0!==t.mesh.vertexBuffer&&(null!=t.animation?(t.animation.currentDraws++,t.animation.currentDraws>t.animation.speed&&(t.animation.currentAni++,t.animation.currentDraws=0,t.animation.currentAni>t.animation.sumOfAniFrames&&(t.animation.currentAni=0)),0==t.animation.currentAni?n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.mesh.vertexBuffer):n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,a.default.meshes[t.animation.id+t.animation.currentAni].vertexBuffer)):(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.mesh.vertexBuffer),n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.mesh.vertices,n.world.GL.gl.STATIC_DRAW)),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.mesh.vertexBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0)),t.shaderProgram.useLightingUniform?(n.world.GL.gl.uniform1i(t.shaderProgram.useLightingUniform,!0),t.mesh.normalBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.mesh.normalBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexNormalAttribute,t.mesh.normalBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexNormalAttribute),0),t.shaderProgram.ambientColorUniform&&(document.getElementById("ambLight")&&document.getElementById("ambLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(document.getElementById("ambLight").color.rgb[0]),parseFloat(document.getElementById("ambLight").color.rgb[1]),parseFloat(document.getElementById("ambLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,t.LightsData.ambientLight.R(),t.LightsData.ambientLight.G(),t.LightsData.ambientLight.B())),t.shaderProgram.directionalColorUniform&&(document.getElementById("dirLight")&&document.getElementById("dirLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(document.getElementById("dirLight").color.rgb[0]),parseFloat(document.getElementById("dirLight").color.rgb[1]),parseFloat(document.getElementById("dirLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,t.LightsData.directionLight.R(),t.LightsData.directionLight.G(),t.LightsData.directionLight.B())),e=null,t.shaderProgram.lightingDirectionUniform&&(e=document.getElementById("dirX")&&document.getElementById("dirY")&&document.getElementById("dirZ")?[parseFloat(document.getElementById("dirX").value),parseFloat(document.getElementById("dirY").value),parseFloat(document.getElementById("dirZ").value)]:[t.LightsData.lightingDirection.r,t.LightsData.lightingDirection.g,t.LightsData.lightingDirection.b],o=vec3.create(),vec3.normalize(o,e),vec3.scale(o,o,-1),n.world.GL.gl.uniform3fv(t.shaderProgram.lightingDirectionUniform,o))):t.shaderProgram.useLightingUniform&&(t.shaderProgram.ambientColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(1),parseFloat(2),parseFloat(0)),t.shaderProgram.directionalColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(1),parseFloat(1),parseFloat(0))),t.mesh.textures.length||t.texture){if(t.texture){if(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.mesh.textureBuffer),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.textureCoordAttribute),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.textureCoordAttribute,t.mesh.textureBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),null!=t.streamTextures)a.default.tools.loadVideoTexture("glVideoTexture",t.streamTextures.videoImage),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,0);else for(var r=0;r<t.textures.length;r++)n.world.GL.gl.activeTexture(n.world.GL.gl["TEXTURE"+r]),n.world.GL.gl.bindTexture(n.world.GL.gl.TEXTURE_2D,t.textures[r]),n.world.GL.gl.pixelStorei(n.world.GL.gl.UNPACK_FLIP_Y_WEBGL,!1),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MAG_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MIN_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_S,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_T,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,r);0}}else;n.world.GL.gl.bindBuffer(n.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.mesh.indexBuffer),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),this.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),n.world.disableUnusedAttr(n.world.GL.gl,3),n.world.GL.gl.drawElements(n.world.GL.gl[t.glDrawElements.mode],t.glDrawElements.numberOfIndicesRender,n.world.GL.gl.UNSIGNED_SHORT,0),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.drawSquareTex=function(t){var e,o,r=0;if(mat4.identity(t.mvMatrix),this.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),l.checkingProcedureCalc&&l.checkingProcedureCalc(t),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),t.vertexPositionBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexPositionAttribute),r+=1),t.vertexColorBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexColorAttribute),r+=1),t.shaderProgram.useLightingUniform?(n.world.GL.gl.uniform1i(t.shaderProgram.useLightingUniform,!0),t.vertexNormalBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexNormalAttribute,t.vertexNormalBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexNormalAttribute),r+=1),t.shaderProgram.ambientColorUniform&&(document.getElementById("ambLight")&&document.getElementById("ambLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(document.getElementById("ambLight").color.rgb[0]),parseFloat(document.getElementById("ambLight").color.rgb[1]),parseFloat(document.getElementById("ambLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,t.LightsData.ambientLight.r,t.LightsData.ambientLight.g,t.LightsData.ambientLight.b)),t.shaderProgram.directionalColorUniform&&(document.getElementById("dirLight")&&document.getElementById("dirLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(document.getElementById("dirLight").color.rgb[0]),parseFloat(document.getElementById("dirLight").color.rgb[1]),parseFloat(document.getElementById("dirLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,t.LightsData.directionLight.R(),t.LightsData.directionLight.G(),t.LightsData.directionLight.B())),e=null,t.shaderProgram.lightingDirectionUniform&&(e=document.getElementById("dirX")&&document.getElementById("dirY")&&document.getElementById("dirZ")?[parseFloat(document.getElementById("dirX").value),parseFloat(document.getElementById("dirY").value),parseFloat(document.getElementById("dirZ").value)]:[t.LightsData.lightingDirection.r,t.LightsData.lightingDirection.g,t.LightsData.lightingDirection.b],o=vec3.create(),vec3.normalize(o,e),vec3.scale(o,o,-1),n.world.GL.gl.uniform3fv(t.shaderProgram.lightingDirectionUniform,o))):t.shaderProgram.useLightingUniform&&(t.shaderProgram.ambientColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(1),parseFloat(2),parseFloat(0)),t.shaderProgram.directionalColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(1),parseFloat(0),parseFloat(0))),t.vertexTexCoordBuffer){if(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.textureCoordAttribute,t.vertexTexCoordBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.textureCoordAttribute),null!=t.streamTextures)a.default.tools.loadVideoTexture("glVideoTexture",t.streamTextures.videoImage),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,0);else for(var i=0;i<t.textures.length;i++)null==t.custom.gl_texture?(n.world.GL.gl.activeTexture(n.world.GL.gl["TEXTURE"+i]),n.world.GL.gl.bindTexture(n.world.GL.gl.TEXTURE_2D,t.textures[i]),n.world.GL.gl.pixelStorei(n.world.GL.gl.UNPACK_FLIP_Y_WEBGL,!1),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MAG_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MIN_FILTER,n.world.GL.gl.NEAREST),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_S,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_T,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.uniform1i(t.shaderProgram["samplerUniform"+i],i)):t.custom.gl_texture(t,i);r+=1}if(n.world.GL.gl.bindBuffer(n.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),n.world.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),t.vertexNormalBuffer&&t.shaderProgram.nMatrixUniform&&(r=mat3.create(),mat3.normalFromMat4(r,t.mvMatrix),mat3.transpose(r,r),n.world.GL.gl.uniformMatrix3fv(t.shaderProgram.nMatrixUniform,!1,r)),n.world.disableUnusedAttr(n.world.GL.gl,4),1==t.glBlend.blendEnabled){n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND);try{n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])}catch(t){console.log(t)}}else n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST);n.world.GL.gl.drawElements(n.world.GL.gl[t.glDrawElements.mode],t.glDrawElements.numberOfIndicesRender,n.world.GL.gl.UNSIGNED_SHORT,0),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)},a.default.operation.draws.sphere=function(t){var e,o,r=0;if(mat4.identity(t.mvMatrix),this.mvPushMatrix(t.mvMatrix,this.mvMatrixStack),1==a.default.camera.FirstPersonController&&s.camera.setCamera(t),mat4.translate(t.mvMatrix,t.mvMatrix,t.position.worldLocation),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rx),t.rotation.getRotDirX()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.ry),t.rotation.getRotDirY()),mat4.rotate(t.mvMatrix,t.mvMatrix,degToRad(t.rotation.rz),t.rotation.getRotDirZ()),t.vertexPositionBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexPositionBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.vertices,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexPositionAttribute,t.vertexPositionBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexPositionAttribute),r+=1),t.vertexColorBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexColorBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexColorAttribute,t.vertexColorBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexColorAttribute),r+=1),t.shaderProgram.useLightingUniform?(n.world.GL.gl.uniform1i(t.shaderProgram.useLightingUniform,!0),t.vertexNormalBuffer&&(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexNormalBuffer),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.vertexNormalAttribute,t.vertexNormalBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.vertexNormalAttribute),r+=1),t.shaderProgram.ambientColorUniform&&(document.getElementById("ambLight")&&document.getElementById("ambLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(document.getElementById("ambLight").color.rgb[0]),parseFloat(document.getElementById("ambLight").color.rgb[1]),parseFloat(document.getElementById("ambLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,t.LightsData.ambientLight.r,t.LightsData.ambientLight.g,t.LightsData.ambientLight.b)),t.shaderProgram.directionalColorUniform&&(document.getElementById("dirLight")&&document.getElementById("dirLight").color?n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(document.getElementById("dirLight").color.rgb[0]),parseFloat(document.getElementById("dirLight").color.rgb[1]),parseFloat(document.getElementById("dirLight").color.rgb[2])):n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,t.LightsData.directionLight.R(),t.LightsData.directionLight.G(),t.LightsData.directionLight.B())),e=null,t.shaderProgram.lightingDirectionUniform&&(e=document.getElementById("dirX")&&document.getElementById("dirY")&&document.getElementById("dirZ")?[parseFloat(document.getElementById("dirX").value),parseFloat(document.getElementById("dirY").value),parseFloat(document.getElementById("dirZ").value)]:[t.LightsData.lightingDirection.r,t.LightsData.lightingDirection.g,t.LightsData.lightingDirection.b],o=vec3.create(),vec3.normalize(o,e),vec3.scale(o,o,-1),n.world.GL.gl.uniform3fv(t.shaderProgram.lightingDirectionUniform,o))):t.shaderProgram.useLightingUniform&&(t.shaderProgram.ambientColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.ambientColorUniform,parseFloat(.2),parseFloat(.2),parseFloat(.2)),t.shaderProgram.directionalColorUniform&&n.world.GL.gl.uniform3f(t.shaderProgram.directionalColorUniform,parseFloat(1),parseFloat(0),parseFloat(0))),t.vertexTexCoordBuffer){if(n.world.GL.gl.bindBuffer(n.world.GL.gl.ARRAY_BUFFER,t.vertexTexCoordBuffer),1==t.geometry.dynamicBuffer&&n.world.GL.gl.bufferData(n.world.GL.gl.ARRAY_BUFFER,t.geometry.texCoords,n.world.GL.gl.STATIC_DRAW),n.world.GL.gl.vertexAttribPointer(t.shaderProgram.textureCoordAttribute,t.vertexTexCoordBuffer.itemSize,n.world.GL.gl.FLOAT,!1,0,0),n.world.GL.gl.enableVertexAttribArray(t.shaderProgram.textureCoordAttribute),null!=t.streamTextures)a.default.tools.loadVideoTexture("glVideoTexture",t.streamTextures.videoImage),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,0);else for(var i=0;i<t.textures.length;i++)n.world.GL.gl.activeTexture(n.world.GL.gl["TEXTURE"+i]),n.world.GL.gl.bindTexture(n.world.GL.gl.TEXTURE_2D,t.textures[i]),n.world.GL.gl.pixelStorei(n.world.GL.gl.UNPACK_FLIP_Y_WEBGL,!1),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MAG_FILTER,n.world.GL.gl.LINEAR),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_MIN_FILTER,n.world.GL.gl.LINEAR),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_S,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.texParameteri(n.world.GL.gl.TEXTURE_2D,n.world.GL.gl.TEXTURE_WRAP_T,n.world.GL.gl.CLAMP_TO_EDGE),n.world.GL.gl.uniform1i(t.shaderProgram.samplerUniform,i);r+=1}n.world.GL.gl.bindBuffer(n.world.GL.gl.ELEMENT_ARRAY_BUFFER,t.vertexIndexBuffer),t.vertexNormalBuffer&&t.shaderProgram.nMatrixUniform&&(o=mat3.create(),mat3.normalFromMat4(o,t.mvMatrix),mat3.transpose(o,o),n.world.GL.gl.uniformMatrix3fv(t.shaderProgram.nMatrixUniform,!1,o));try{n.world.GL.gl.useProgram(t.shaderProgram),n.world.GL.gl.uniform1i(t.shaderProgram.uniformTime,.1)}catch(t){console.warn("WTF - ERROR10001")}n.world.disableUnusedAttr(n.world.GL.gl,r),1==t.glBlend.blendEnabled?(n.world.GL.gl.isEnabled(n.world.GL.gl.BLEND)||n.world.GL.gl.enable(n.world.GL.gl.BLEND),n.world.GL.gl.blendFunc(n.world.GL.gl[t.glBlend.blendParamSrc],n.world.GL.gl[t.glBlend.blendParamDest])):(n.world.GL.gl.disable(n.world.GL.gl.BLEND),n.world.GL.gl.enable(n.world.GL.gl.DEPTH_TEST)),n.world.setMatrixUniforms(t,this.pMatrix,t.mvMatrix),n.world.GL.gl.drawElements(n.world.GL.gl[t.glDrawElements.mode],t.glDrawElements.numberOfIndicesRender,n.world.GL.gl.UNSIGNED_SHORT,0),t.instancedDraws.overrideDrawArraysInstance(t),this.mvPopMatrix(t.mvMatrix,this.mvMatrixStack)};var i=a.default.operation.draws;o.default=i},{"../program/manifest":20,"./events":5,"./matrix-world":14,"./raycast":15}],10:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.COLOR=function(t,e,o){var r=this;r.r=parseFloat(t),r.g=parseFloat(e),r.b=parseFloat(o),r.R=function(){return parseFloat(r.r)},r.G=function(){return parseFloat(r.g)},r.B=function(){return parseFloat(r.b)},r.set=function(t,e,o){r.r=parseFloat(t),r.g=parseFloat(e),r.b=parseFloat(o)},r.print=function(){console.log("color data RGB format : R:"+r.r+"  G:"+r.g+"  B:"+r.b)}},o.COLOR_ALPHA=l,o.ring=function(t,e,o){},o.customVertex_1=o.customVertex=o.sphereVertex=o.PiramideVertex=o.GeoOfColor=o.CubeVertex=o.SquareVertex=o.TriangleVertex=o.Position=o.RotationVector=o.Point=o.Scale=void 0;var r,s=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},i=t("./utility");class a{constructor(){this.x=1,this.y=1,this.z=1}LinearScale(t){this.x=t,this.y=t,this.z=t}}o.Scale=a;class n{constructor(t,e,o){void 0===o&&(o=0),this.x=t,this.y=e,this.z=o,this.scale=new a}get X(){return parseFloat(this.x*this.scale.x)}get Y(){return parseFloat(this.y*this.scale.y)}get Z(){return parseFloat(this.z*this.scale.z)}}o.Point=n;o.RotationVector=class{constructor(t,e,o,r,i,a){return void 0===e&&(e=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),this.x=t=void 0===t?0:t,this.y=e,this.z=o,this.rotx=r,this.roty=i,this.rotz=a,this.rotationSpeed={x:0,y:0,z:0},this}get rotSpeedX(){return this.rotationSpeed.x}get rotSpeedY(){return this.rotationSpeed.y}get rotSpeedZ(){return this.rotationSpeed.z}get X(){return this.x}get Y(){return this.y}get Z(){return this.z}get RotationVector(){return[this.x,this.y,this.z]}SetDirection(t,e,o){return this.x=t,this.y=e,this.z=o,[this.x,this.y,this.z]}getRotDirX(){return[1,0,0]}getRotDirY(){return[0,1,0]}getRotDirZ(){return[0,0,1]}SetDirectionX(){this.x=1,this.y=0,this.z=0}SetDirectionY(){this.x=0,this.y=1,this.z=0}SetDirectionZ(){this.x=0,this.y=0,this.z=1}SetDirectionXY(){this.x=1,this.y=1,this.z=0}SetDirectionXZ(){this.x=1,this.y=0,this.z=1}SetDirectionYZ(){this.x=0,this.y=1,this.z=1}rotateX(t){this.rotx=t}rotateY(t){this.roty=t}rotateZ(t){this.rotz=t}get rx(){return this.rotx}get ry(){return this.roty}get rz(){return this.rotz}};o.Position=class{constructor(t,e,o){return void 0===e&&(e=0),void 0===o&&(o=0),this.x=t=void 0===t?0:t,this.y=e,this.z=o,this.velY=0,this.velX=0,this.velZ=0,this.inMove=!1,this.targetX=t,this.targetY=e,this.targetZ=o,this.thrust=.01,this}setSpeed(t){"number"==typeof t?this.thrust=t:SYS.DEBUG.WARNING("Description: arguments (w, h) must be type of number.")}translateByX=function(t){this.inMove=!0,this.targetX=t};translateByY(t){this.inMove=!0,this.targetY=t}translateByZ(t){this.inMove=!0,this.targetZ=t}translateByXY(t,e){this.inMove=!0,this.targetX=t,this.targetY=e}translateByXZ(t,e){this.inMove=!0,this.targetX=t,this.targetZ=e}translateByYZ(t,e){this.inMove=!0,this.targetY=t,this.targetZ=e}onTargetPositionReach(){}update(){var t=this.targetX-this.x,e=this.targetY-this.y,o=this.targetZ-this.z,r=Math.sqrt(t*t+e*e+o*o);this.velX=t/r*this.thrust,this.velY=e/r*this.thrust,this.velZ=o/r*this.thrust,1==this.inMove&&(r>this.thrust?(this.x+=this.velX,this.y+=this.velY,this.z+=this.velZ):(this.x=this.targetX,this.y=this.targetY,this.z=this.targetZ,this.inMove=!1,this.onTargetPositionReach()))}get worldLocation(){return[this.x,this.y,this.z]}SetX(t){this.x=t,this.targetX=t,this.inMove=!1}SetY(t){this.y=t,this.targetY=t,this.inMove=!1}SetZ(t){this.z=t,this.targetZ=t,this.inMove=!1}setPosition(t,e,o){this.x=t,this.y=e,this.z=o,this.targetX=t,this.targetY=e,this.targetZ=o,this.inMove=!1}};o.TriangleVertex=class{constructor(t){this.root=t,this.size=t.size,this.dynamicBuffer=s.default.dynamicBuffer,this.pointA=new n(0,1,0),this.pointB=new n(-1,-1,0),this.pointC=new n(1,-1,0)}get vertices(){return new Float32Array([this.pointA.X,this.pointA.Y*this.root.size,this.pointA.Z,this.pointB.X*this.root.size,this.pointB.Y*this.root.size,this.pointB.Z,this.pointC.X*this.root.size,this.pointC.Y*this.root.size,this.pointC.Z])}get indices(){return[0,1,2]}setScale(t){if(this.size=t,1!=this.dynamicBuffer)return s.default.operation.triangle_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}};o.SquareVertex=class{constructor(t){this.root=t,this.size=t.size,this.pointA=new n(1,1,0),this.pointB=new n(-1,1,0),this.pointC=new n(1,-1,0),this.pointD=new n(-1,-1,0),this.dynamicBuffer=!0,this.texCoordsPoints={right_top:new n(1,1,0),left_top:new n(0,1,0),right_bottom:new n(1,0,0),left_bottom:new n(0,0,0)},this.colorData={},this.colorData.parent=this.root,this.colorData.color=[new l(1,0,0,1),new l(0,1,0,1),new l(.5,0,1,1),new l(.5,.5,1,1)]}get vertices(){return new Float32Array([this.pointA.X*this.size,this.pointA.Y*this.size,this.pointA.Z,this.pointB.X*this.size,this.pointB.Y*this.size,this.pointB.Z,this.pointC.X*this.size,this.pointC.Y*this.size,this.pointC.Z,this.pointD.X*this.size,this.pointD.Y*this.size,this.pointD.Z])}get texCoords(){return new Float32Array([this.texCoordsPoints.right_top.X,this.texCoordsPoints.right_top.Y,this.texCoordsPoints.left_top.X,this.texCoordsPoints.left_top.Y,this.texCoordsPoints.right_bottom.X,this.texCoordsPoints.right_bottom.Y,this.texCoordsPoints.left_bottom.X,this.texCoordsPoints.left_bottom.Y])}get indices(){return[0,1,2,3,2,1]}setTexCoordScaleFactor(t){this.texCoordsPoints.right_top.y=1+t,this.texCoordsPoints.right_top.x=1+t,this.texCoordsPoints.left_bottom.x=0-t,this.texCoordsPoints.left_bottom.y=0-t,this.texCoordsPoints.left_top.x=0-t,this.texCoordsPoints.left_top.y=1+t,this.texCoordsPoints.right_bottom.x=1+t,this.texCoordsPoints.right_bottom.y=0-t}setScaleByX(t){if(this.pointA.x=t,this.pointB.x=-t,this.pointC.x=t,this.pointD.x=-t,1!=this.dynamicBuffer)return s.default.operation.square_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setScaleByY(t){if(this.pointA.y=t,this.pointB.y=t,this.pointC.y=-t,this.pointD.y=-t,1!=this.dynamicBuffer)return s.default.operation.square_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setScale(t){if(this.size=t,1!=this.dynamicBuffer)return s.default.operation.square_buffer_procedure(this.root),"DynamicBuffer is false but i will update vertex array prototypical."}get color(){var e=[];return this.colorData.color.forEach(t=>{e.push(t.r),e.push(t.g),e.push(t.b),e.push(t.ALPHA())}),new Float32Array(e)}setColorSolid(r,i,a,n){void 0===n&&(n=1),this.colorData.color.forEach((t,e,o)=>{o[e].r=r,o[e].g=i,o[e].b=a,o[e].a=n}),s.default.operation.square_buffer_procedure(this.root)}setColorComponentRed(r){this.colorData.color.forEach((t,e,o)=>{o[e].r=r}),s.default.operation.square_buffer_procedure(this.root)}setColorComponentGreen(r){this.colorData.color.forEach((t,e,o)=>{o[e].g=r}),s.default.operation.square_buffer_procedure(this.root)}setColorComponentBlue(r){this.colorData.color.forEach((t,e,o)=>{o[e].b=r}),s.default.operation.square_buffer_procedure(this.root)}};o.CubeVertex=class{constructor(t){this.root=t,this.size=t.size,this.basePoint=+this.size,this.basePointNeg=-1*this.size,this.dynamicBuffer=!0,this.osciTest=new i.OSCILLATOR(0,2,.002),this.texCoordsPoints={front:{right_top:new n(0,0,0),left_top:new n(0,1,0),right_bottom:new n(1,1,0),left_bottom:new n(1,0,0)},back:{right_top:new n(1,1,0),left_top:new n(1,0,0),right_bottom:new n(0,0,0),left_bottom:new n(0,1,0)},top:{right_top:new n(1,0,0),left_top:new n(0,0,0),right_bottom:new n(0,1,0),left_bottom:new n(1,1,0)},bottom:{right_top:new n(0,0,0),left_top:new n(0,1,0),right_bottom:new n(1,1,0),left_bottom:new n(1,0,0)},right:{right_top:new n(0,0,0),left_top:new n(0,1,0),right_bottom:new n(1,1,0),left_bottom:new n(1,0,0)},left:{right_top:new n(0,0,0),left_top:new n(0,1,0),right_bottom:new n(1,1,0),left_bottom:new n(1,0,0)}},this.Front={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.Back={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.Top={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.Bottom={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.Right={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.Left={pointA:new n(0,0,0),pointB:new n(0,0,0),pointC:new n(0,0,0),pointD:new n(0,0,0)},this.colorData={},this.colorData.parent=this.root,this.colorData.Front={pointA:new l(1,0,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1),pointD:new l(0,0,1,1)},this.colorData.Back={pointA:new l(1,0,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1),pointD:new l(0,0,1,1)},this.colorData.Top={pointA:new l(0,1,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1),pointD:new l(0,0,1,1)},this.colorData.Bottom={pointA:new l(0,1,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1),pointD:new l(0,0,1,1)},this.colorData.Right={pointA:new l(1,0,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1),pointD:new l(0,0,1,1)},this.colorData.Left={pointA:new l(1,0,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1),pointD:new l(0,0,1,1)},this.colorData.SetRedForAll=function(t){this.Front.pointA.r=t,this.Front.pointB.r=t,this.Front.pointC.r=t,this.Front.pointD.r=t,this.Right.pointA.r=t,this.Right.pointB.r=t,this.Right.pointC.r=t,this.Right.pointD.r=t,this.Back.pointA.r=t,this.Back.pointB.r=t,this.Back.pointC.r=t,this.Back.pointD.r=t,this.Left.pointA.r=t,this.Left.pointB.r=t,this.Left.pointC.r=t,this.Left.pointD.r=t,this.Bottom.pointA.r=t,this.Bottom.pointB.r=t,this.Bottom.pointC.r=t,this.Bottom.pointD.r=t,this.Top.pointA.r=t,this.Top.pointB.r=t,this.Top.pointC.r=t,this.Top.pointD.r=t,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetGreenForAll=function(t){this.Front.pointA.g=t,this.Front.pointB.g=t,this.Front.pointC.g=t,this.Front.pointD.g=t,this.Right.pointA.g=t,this.Right.pointB.g=t,this.Right.pointC.g=t,this.Right.pointD.g=t,this.Back.pointA.g=t,this.Back.pointB.g=t,this.Back.pointC.g=t,this.Back.pointD.g=t,this.Left.pointA.g=t,this.Left.pointB.g=t,this.Left.pointC.g=t,this.Left.pointD.g=t,this.Bottom.pointA.g=t,this.Bottom.pointB.g=t,this.Bottom.pointC.g=t,this.Bottom.pointD.g=t,this.Top.pointA.g=t,this.Top.pointB.g=t,this.Top.pointC.g=t,this.Top.pointD.g=t,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetBlueForAll=function(t){this.Front.pointA.b=t,this.Front.pointB.b=t,this.Front.pointC.b=t,this.Front.pointD.b=t,this.Right.pointA.b=t,this.Right.pointB.b=t,this.Right.pointC.b=t,this.Right.pointD.b=t,this.Back.pointA.b=t,this.Back.pointB.b=t,this.Back.pointC.b=t,this.Back.pointD.b=t,this.Left.pointA.b=t,this.Left.pointB.b=t,this.Left.pointC.b=t,this.Left.pointD.b=t,this.Bottom.pointA.b=t,this.Bottom.pointB.b=t,this.Bottom.pointC.b=t,this.Bottom.pointD.b=t,this.Top.pointA.b=t,this.Top.pointB.b=t,this.Top.pointC.b=t,this.Top.pointD.b=t,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetFrontSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Front.pointA.r=t,this.Front.pointA.g=e,this.Front.pointA.b=o,this.Front.pointA.a=r,this.Front.pointB.r=t,this.Front.pointB.g=e,this.Front.pointB.b=o,this.Front.pointB.a=r,this.Front.pointC.r=t,this.Front.pointC.g=e,this.Front.pointC.b=o,this.Front.pointC.a=r,this.Front.pointD.r=t,this.Front.pointD.g=e,this.Front.pointD.b=o,this.Front.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetRightSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Right.pointA.r=t,this.Right.pointA.g=e,this.Right.pointA.b=o,this.Right.pointA.a=r,this.Right.pointB.r=t,this.Right.pointB.g=e,this.Right.pointB.b=o,this.Right.pointB.a=r,this.Right.pointC.r=t,this.Right.pointC.g=e,this.Right.pointC.b=o,this.Right.pointC.a=r,this.Right.pointD.r=t,this.Right.pointD.g=e,this.Right.pointD.b=o,this.Right.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetBackSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Back.pointA.r=t,this.Back.pointA.g=e,this.Back.pointA.b=o,this.Back.pointA.a=r,this.Back.pointB.r=t,this.Back.pointB.g=e,this.Back.pointB.b=o,this.Back.pointB.a=r,this.Back.pointC.r=t,this.Back.pointC.g=e,this.Back.pointC.b=o,this.Back.pointC.a=r,this.Back.pointD.r=t,this.Back.pointD.g=e,this.Back.pointD.b=o,this.Back.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetLeftSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Left.pointA.r=t,this.Left.pointA.g=e,this.Left.pointA.b=o,this.Left.pointA.a=r,this.Left.pointB.r=t,this.Left.pointB.g=e,this.Left.pointB.b=o,this.Left.pointB.a=r,this.Left.pointC.r=t,this.Left.pointC.g=e,this.Left.pointC.b=o,this.Left.pointC.a=r,this.Left.pointD.r=t,this.Left.pointD.g=e,this.Left.pointD.b=o,this.Left.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetBottomSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Bottom.pointA.r=t,this.Bottom.pointA.g=e,this.Bottom.pointA.b=o,this.Bottom.pointA.a=r,this.Bottom.pointB.r=t,this.Bottom.pointB.g=e,this.Bottom.pointB.b=o,this.Bottom.pointB.a=r,this.Bottom.pointC.r=t,this.Bottom.pointC.g=e,this.Bottom.pointC.b=o,this.Bottom.pointC.a=r,this.Bottom.pointD.r=t,this.Bottom.pointD.g=e,this.Bottom.pointD.b=o,this.Bottom.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetTopSolidColor=function(t,e,o,r){void 0===r&&(r=1),this.Top.pointA.r=t,this.Top.pointA.g=e,this.Top.pointA.b=o,this.Top.pointA.a=r,this.Top.pointB.r=t,this.Top.pointB.g=e,this.Top.pointB.b=o,this.Top.pointB.a=r,this.Top.pointC.r=t,this.Top.pointC.g=e,this.Top.pointC.b=o,this.Top.pointC.a=r,this.Top.pointD.r=t,this.Top.pointD.g=e,this.Top.pointD.b=o,this.Top.pointD.a=r,s.default.operation.cube_buffer_procedure(this.parent)},this.colorData.SetSolidColor=function(t,e,o,r){this.SetBottomSolidColor(t,e,o,r),this.SetLeftSolidColor(t,e,o,r),this.SetBackSolidColor(t,e,o,r),this.SetRightSolidColor(t,e,o,r),this.SetFrontSolidColor(t,e,o,r),this.SetTopSolidColor(t,e,o,r)}}setScaleByX(t){if(this.Left.pointA.x=-t,this.Left.pointB.x=-t,this.Left.pointC.x=-t,this.Left.pointD.x=-t,this.Right.pointA.x=t,this.Right.pointB.x=t,this.Right.pointC.x=t,this.Right.pointD.x=t,this.Top.pointA.x=-t,this.Top.pointB.x=-t,this.Top.pointC.x=t,this.Top.pointD.x=t,this.Bottom.pointA.x=-t,this.Bottom.pointB.x=t,this.Bottom.pointC.x=t,this.Bottom.pointD.x=-t,this.Front.pointA.x=-t,this.Front.pointB.x=t,this.Front.pointC.x=t,this.Front.pointD.x=-t,this.Back.pointA.x=-t,this.Back.pointB.x=-t,this.Back.pointC.x=t,this.Back.pointD.x=t,1!=this.dynamicBuffer)return s.default.operation.cube_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setScaleByY(t){if(this.Left.pointA.y=-t,this.Left.pointB.y=-t,this.Left.pointC.y=t,this.Left.pointD.y=t,this.Right.pointA.y=-t,this.Right.pointB.y=t,this.Right.pointC.y=t,this.Right.pointD.y=-t,this.Top.pointA.y=t,this.Top.pointB.y=t,this.Top.pointC.y=t,this.Top.pointD.y=t,this.Bottom.pointA.y=-t,this.Bottom.pointB.y=-t,this.Bottom.pointC.y=-t,this.Bottom.pointD.y=-t,this.Front.pointA.y=-t,this.Front.pointB.y=-t,this.Front.pointC.y=t,this.Front.pointD.y=t,this.Back.pointA.y=-t,this.Back.pointB.y=t,this.Back.pointC.y=t,this.Back.pointD.y=-t,1!=this.dynamicBuffer)return s.default.operation.cube_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setScaleByZ(t){if(this.Left.pointA.z=-t,this.Left.pointB.z=t,this.Left.pointC.z=t,this.Left.pointD.z=-t,this.Right.pointA.z=-t,this.Right.pointB.z=-t,this.Right.pointC.z=t,this.Right.pointD.z=t,this.Top.pointA.z=t,this.Top.pointB.z=t,this.Top.pointC.z=t,this.Top.pointD.z=t,this.Bottom.pointA.z=-t,this.Bottom.pointB.z=-t,this.Bottom.pointC.z=-t,this.Bottom.pointD.z=-t,this.Front.pointA.z=t,this.Front.pointB.z=t,this.Front.pointC.z=t,this.Front.pointD.z=t,this.Back.pointA.z=-t,this.Back.pointB.z=-t,this.Back.pointC.z=-t,this.Back.pointD.z=-t,1!=this.dynamicBuffer)return s.default.operation.cube_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setScale(t){if(this.size=t,this.basePoint=+this.size,this.basePointNeg=-1*this.size,1!=this.dynamicBuffer)return s.default.operation.cube_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setTexCoordScaleFactor(t){function e(t){return t<=0?-1:1}for(var o in this.texCoordsPoints)this.texCoordsPoints[o].right_top.y=this.texCoordsPoints[o].right_top.y+t*e(this.texCoordsPoints[o].right_top.y),this.texCoordsPoints[o].right_top.x=this.texCoordsPoints[o].right_top.x+t*e(this.texCoordsPoints[o].right_top.x),this.texCoordsPoints[o].left_bottom.x=this.texCoordsPoints[o].left_bottom.x+t*e(this.texCoordsPoints[o].left_bottom.x),this.texCoordsPoints[o].left_bottom.y=this.texCoordsPoints[o].left_bottom.y+t*e(this.texCoordsPoints[o].left_bottom.y),this.texCoordsPoints[o].left_top.x=this.texCoordsPoints[o].left_top.x+t*e(this.texCoordsPoints[o].left_top.x),this.texCoordsPoints[o].left_top.y=this.texCoordsPoints[o].left_top.y+t*e(this.texCoordsPoints[o].left_top.y),this.texCoordsPoints[o].right_bottom.x=this.texCoordsPoints[o].right_bottom.x+t*e(this.texCoordsPoints[o].right_bottom.x),this.texCoordsPoints[o].right_bottom.y=this.texCoordsPoints[o].right_bottom.y+t*e(this.texCoordsPoints[o].right_bottom.y)}get vertices(){return new Float32Array([this.basePointNeg+this.Front.pointA.X,this.basePointNeg+this.Front.pointA.Y,this.basePoint+this.Front.pointA.Z,this.basePoint+this.Front.pointB.X,this.basePointNeg+this.Front.pointB.Y,this.basePoint+this.Front.pointB.Z,this.basePoint+this.Front.pointC.X,this.basePoint+this.Front.pointC.Y,this.basePoint+this.Front.pointC.Z,this.basePointNeg+this.Front.pointD.X,this.basePoint+this.Front.pointD.Y,this.basePoint+this.Front.pointD.Z,this.basePointNeg+this.Back.pointA.X,this.basePointNeg+this.Back.pointA.Y,this.basePointNeg+this.Back.pointA.Z,this.basePointNeg+this.Back.pointB.X,this.basePoint+this.Back.pointB.Y,this.basePointNeg+this.Back.pointB.Z,this.basePoint+this.Back.pointC.X,this.basePoint+this.Back.pointC.Y,this.basePointNeg+this.Back.pointC.Z,this.basePoint+this.Back.pointD.X,this.basePointNeg+this.Back.pointD.Y,this.basePointNeg+this.Back.pointD.Z,this.basePointNeg+this.Top.pointA.X,this.basePoint+this.Top.pointA.Y,this.basePointNeg+this.Top.pointA.Z,this.basePointNeg+this.Top.pointB.X,this.basePoint+this.Top.pointB.Y,this.basePoint+this.Top.pointA.Z,this.basePoint+this.Top.pointC.X,this.basePoint+this.Top.pointC.Y,this.basePoint+this.Top.pointA.Z,this.basePoint+this.Top.pointD.X,this.basePoint+this.Top.pointD.Y,this.basePointNeg+this.Top.pointA.Z,this.basePointNeg+this.Bottom.pointA.X,this.basePointNeg+this.Bottom.pointA.Y,this.basePointNeg+this.Bottom.pointA.Z,this.basePoint+this.Bottom.pointB.X,this.basePointNeg+this.Bottom.pointB.Y,this.basePointNeg+this.Bottom.pointB.Z,this.basePoint+this.Bottom.pointC.X,this.basePointNeg+this.Bottom.pointC.Y,this.basePoint+this.Bottom.pointC.Z,this.basePointNeg+this.Bottom.pointD.X,this.basePointNeg+this.Bottom.pointD.Y,this.basePoint+this.Bottom.pointD.Z,this.basePoint+this.Right.pointA.X,this.basePointNeg+this.Right.pointA.Y,this.basePointNeg+this.Right.pointA.Z,this.basePoint+this.Right.pointB.X,this.basePoint+this.Right.pointB.Y,this.basePointNeg+this.Right.pointB.Z,this.basePoint+this.Right.pointC.X,this.basePoint+this.Right.pointC.Y,this.basePoint+this.Right.pointC.Z,this.basePoint+this.Right.pointD.X,this.basePointNeg+this.Right.pointD.Y,this.basePoint+this.Right.pointD.Z,this.basePointNeg+this.Left.pointA.X,this.basePointNeg+this.Left.pointA.Y,this.basePointNeg+this.Left.pointA.Z,this.basePointNeg+this.Left.pointB.X,this.basePointNeg+this.Left.pointB.Y,this.basePoint+this.Left.pointB.Z,this.basePointNeg+this.Left.pointC.X,this.basePoint+this.Left.pointC.Y,this.basePoint+this.Left.pointC.Z,this.basePointNeg+this.Left.pointD.X,this.basePoint+this.Left.pointD.Y,this.basePointNeg+this.Left.pointD.Z])}get texCoords(){return new Float32Array([this.texCoordsPoints.front.right_top.X,this.texCoordsPoints.front.right_top.Y,this.texCoordsPoints.front.left_top.X,this.texCoordsPoints.front.left_top.Y,this.texCoordsPoints.front.right_bottom.X,this.texCoordsPoints.front.right_bottom.Y,this.texCoordsPoints.front.left_bottom.X,this.texCoordsPoints.front.left_bottom.Y,this.texCoordsPoints.back.right_top.X,this.texCoordsPoints.back.right_top.Y,this.texCoordsPoints.back.left_top.X,this.texCoordsPoints.back.left_top.Y,this.texCoordsPoints.back.right_bottom.X,this.texCoordsPoints.back.right_bottom.Y,this.texCoordsPoints.back.left_bottom.X,this.texCoordsPoints.back.left_bottom.Y,this.texCoordsPoints.top.right_top.X,this.texCoordsPoints.top.right_top.Y,this.texCoordsPoints.top.left_top.X,this.texCoordsPoints.top.left_top.Y,this.texCoordsPoints.top.right_bottom.X,this.texCoordsPoints.top.right_bottom.Y,this.texCoordsPoints.top.left_bottom.X,this.texCoordsPoints.top.left_bottom.Y,this.texCoordsPoints.bottom.right_top.X,this.texCoordsPoints.bottom.right_top.Y,this.texCoordsPoints.bottom.left_top.X,this.texCoordsPoints.bottom.left_top.Y,this.texCoordsPoints.bottom.right_bottom.X,this.texCoordsPoints.bottom.right_bottom.Y,this.texCoordsPoints.bottom.left_bottom.X,this.texCoordsPoints.bottom.left_bottom.Y,this.texCoordsPoints.right.right_top.X,this.texCoordsPoints.right.right_top.Y,this.texCoordsPoints.right.left_top.X,this.texCoordsPoints.right.left_top.Y,this.texCoordsPoints.right.right_bottom.X,this.texCoordsPoints.right.right_bottom.Y,this.texCoordsPoints.right.left_bottom.X,this.texCoordsPoints.right.left_bottom.Y,this.texCoordsPoints.left.right_top.X,this.texCoordsPoints.left.right_top.Y,this.texCoordsPoints.left.left_top.X,this.texCoordsPoints.left.left_top.Y,this.texCoordsPoints.left.right_bottom.X,this.texCoordsPoints.left.right_bottom.Y,this.texCoordsPoints.left.left_bottom.X,this.texCoordsPoints.left.left_bottom.Y])}get indices(){return[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}get color(){return new Float32Array([this.colorData.Front.pointA.r,this.colorData.Front.pointA.g,this.colorData.Front.pointA.b,this.colorData.Front.pointA.ALPHA(),this.colorData.Front.pointB.r,this.colorData.Front.pointB.g,this.colorData.Front.pointB.b,this.colorData.Front.pointB.ALPHA(),this.colorData.Front.pointC.r,this.colorData.Front.pointC.g,this.colorData.Front.pointC.b,this.colorData.Front.pointC.ALPHA(),this.colorData.Front.pointD.r,this.colorData.Front.pointD.g,this.colorData.Front.pointD.b,this.colorData.Front.pointD.ALPHA(),this.colorData.Right.pointA.r,this.colorData.Right.pointA.g,this.colorData.Right.pointA.b,this.colorData.Right.pointA.ALPHA(),this.colorData.Right.pointB.r,this.colorData.Right.pointB.g,this.colorData.Right.pointB.b,this.colorData.Right.pointB.ALPHA(),this.colorData.Right.pointC.r,this.colorData.Right.pointC.g,this.colorData.Right.pointC.b,this.colorData.Right.pointC.ALPHA(),this.colorData.Right.pointD.r,this.colorData.Right.pointD.g,this.colorData.Right.pointD.b,this.colorData.Right.pointD.ALPHA(),this.colorData.Back.pointA.r,this.colorData.Back.pointA.g,this.colorData.Back.pointA.b,this.colorData.Back.pointA.ALPHA(),this.colorData.Back.pointB.r,this.colorData.Back.pointB.g,this.colorData.Back.pointB.b,this.colorData.Back.pointB.ALPHA(),this.colorData.Back.pointC.r,this.colorData.Back.pointC.g,this.colorData.Back.pointC.b,this.colorData.Back.pointC.ALPHA(),this.colorData.Back.pointD.r,this.colorData.Back.pointD.g,this.colorData.Back.pointD.b,this.colorData.Back.pointD.ALPHA(),this.colorData.Left.pointA.r,this.colorData.Left.pointA.g,this.colorData.Left.pointA.b,this.colorData.Left.pointA.ALPHA(),this.colorData.Left.pointB.r,this.colorData.Left.pointB.g,this.colorData.Left.pointB.b,this.colorData.Left.pointB.ALPHA(),this.colorData.Left.pointC.r,this.colorData.Left.pointC.g,this.colorData.Left.pointC.b,this.colorData.Left.pointC.ALPHA(),this.colorData.Left.pointD.r,this.colorData.Left.pointD.g,this.colorData.Left.pointD.b,this.colorData.Left.pointD.ALPHA(),this.colorData.Bottom.pointA.r,this.colorData.Bottom.pointA.g,this.colorData.Bottom.pointA.b,this.colorData.Bottom.pointA.ALPHA(),this.colorData.Bottom.pointB.r,this.colorData.Bottom.pointB.g,this.colorData.Bottom.pointB.b,this.colorData.Bottom.pointB.ALPHA(),this.colorData.Bottom.pointC.r,this.colorData.Bottom.pointC.g,this.colorData.Bottom.pointC.b,this.colorData.Bottom.pointC.ALPHA(),this.colorData.Bottom.pointD.r,this.colorData.Bottom.pointD.g,this.colorData.Bottom.pointD.b,this.colorData.Bottom.pointD.ALPHA(),this.colorData.Top.pointA.r,this.colorData.Top.pointA.g,this.colorData.Top.pointA.b,this.colorData.Top.pointA.ALPHA(),this.colorData.Top.pointB.r,this.colorData.Top.pointB.g,this.colorData.Top.pointB.b,this.colorData.Top.pointB.ALPHA(),this.colorData.Top.pointC.r,this.colorData.Top.pointC.g,this.colorData.Top.pointC.b,this.colorData.Top.pointC.ALPHA(),this.colorData.Top.pointD.r,this.colorData.Top.pointD.g,this.colorData.Top.pointD.b,this.colorData.Top.pointD.ALPHA()])}};o.GeoOfColor=class{constructor(t){return void 0!==t?"4x4"==t||"square"==t?new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,.5,1,.5,1]):"triangle"==t?[1,0,0,1,0,1,0,1,0,0,1,1]:"Piramide4"==t?(this.front="test",new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1,0,1,0,1,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,1])):"cube"==t?[[1,1,1,1],[1,1,0,1],[0,1,0,1],[1,.5,.5,1],[1,0,1,1],[0,0,1,1]]:"cubelight"==t||"cube light"==t?new Float32Array([0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,-1,1,0,0,-1,1,0,0,-1,1,0,0,-1,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,-1,0,1,0,-1,0,1,0,-1,0,1,0,-1,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,-1,0,0,1,-1,0,0,1,-1,0,0,1,-1,0,0,1]):void 0:[1,0,0,1,0,1,0,1,0,0,1,1,.5,1,.5,1]}};o.PiramideVertex=class{constructor(t){this.root=t,this.size=t.size,this.dynamicBuffer=!0,this.spitz=0,this.basePoint=+this.size,this.basePointNeg=-1*this.size,this.colorData={},this.colorData.parent=this.root,this.colorData.Front={pointA:new l(1,0,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1)},this.colorData.Back={pointA:new l(1,0,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1)},this.colorData.BottomRight={pointA:new l(0,1,0,1),pointB:new l(0,1,0,1),pointC:new l(0,0,1,1)},this.colorData.Bottom={pointA:new l(0,1,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1)},this.colorData.Right={pointA:new l(1,0,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1)},this.colorData.Left={pointA:new l(1,0,0,1),pointB:new l(0,0,1,1),pointC:new l(0,1,0,1)},this.colorData.SetRedForAll=function(t){this.Front.pointA.r=t,this.Front.pointB.r=t,this.Front.pointC.r=t,this.Right.pointA.r=t,this.Right.pointB.r=t,this.Right.pointC.r=t,this.Back.pointA.r=t,this.Back.pointB.r=t,this.Back.pointC.r=t,this.Left.pointA.r=t,this.Left.pointB.r=t,this.Left.pointC.r=t,this.Bottom.pointA.r=t,this.Bottom.pointB.r=t,this.Bottom.pointC.r=t,this.BottomRight.pointA.r=t,this.BottomRight.pointB.r=t,this.BottomRight.pointC.r=t,s.default.operation.piramide_buffer_procedure(this.parent)},this.colorData.SetGreenForAll=function(t){this.Front.pointA.g=t,this.Front.pointB.g=t,this.Front.pointC.g=t,this.Right.pointA.g=t,this.Right.pointB.g=t,this.Right.pointC.g=t,this.Back.pointA.g=t,this.Back.pointB.g=t,this.Back.pointC.g=t,this.Left.pointA.g=t,this.Left.pointB.g=t,this.Left.pointC.g=t,this.Bottom.pointA.g=t,this.Bottom.pointB.g=t,this.Bottom.pointC.g=t,this.BottomRight.pointA.g=t,this.BottomRight.pointB.g=t,this.BottomRight.pointC.g=t,s.default.operation.piramide_buffer_procedure(this.parent)},this.colorData.SetBlueForAll=function(t){this.Front.pointA.b=t,this.Front.pointB.b=t,this.Front.pointC.b=t,this.Right.pointA.b=t,this.Right.pointB.b=t,this.Right.pointC.b=t,this.Back.pointA.b=t,this.Back.pointB.b=t,this.Back.pointC.b=t,this.Left.pointA.b=t,this.Left.pointB.b=t,this.Left.pointC.b=t,this.Bottom.pointA.b=t,this.Bottom.pointB.b=t,this.Bottom.pointC.b=t,this.BottomRight.pointA.b=t,this.BottomRight.pointB.b=t,this.BottomRight.pointC.b=t,s.default.operation.piramide_buffer_procedure(this.parent)}}setScale(t){if(this.size=t,this.basePoint=+this.size,this.basePointNeg=-1*this.size,1!=this.dynamicBuffer)return s.default.operation.piramide_buffer_procedure(this.root),"dynamicBuffer is false but i will update vertex array prototypical."}setSpitz(t){this.spitz=t,1!=this.dynamicBuffer&&s.default.operation.piramide_buffer_procedure(this.root)}get verticesC(){return new Float32Array([-1,-1,1,1,-1,1,0,15,0,0,15,0,-1,-1,-1,0,15,0,0,15,0,1,-1,-1,0,15,0,0,15,0,0,15,0,0,15,0,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,0,15,0,0,15,0,1,-1,1,-1,-1,-1,-1,-1,1,0,15,0,0,15,0])}get normals(){return new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0])}get texCoords(){return new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])}get indices(){return[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}get color(){return new Float32Array([this.colorData.Front.pointA.r,this.colorData.Front.pointA.g,this.colorData.Front.pointA.b,this.colorData.Front.pointA.ALPHA(),this.colorData.Front.pointB.r,this.colorData.Front.pointB.g,this.colorData.Front.pointB.b,this.colorData.Front.pointB.ALPHA(),this.colorData.Front.pointC.r,this.colorData.Front.pointC.g,this.colorData.Front.pointC.b,this.colorData.Front.pointC.ALPHA(),this.colorData.Right.pointA.r,this.colorData.Right.pointA.g,this.colorData.Right.pointA.b,this.colorData.Right.pointA.ALPHA(),this.colorData.Right.pointB.r,this.colorData.Right.pointB.g,this.colorData.Right.pointB.b,this.colorData.Right.pointB.ALPHA(),this.colorData.Right.pointC.r,this.colorData.Right.pointC.g,this.colorData.Right.pointC.b,this.colorData.Right.pointC.ALPHA(),this.colorData.Back.pointA.r,this.colorData.Back.pointA.g,this.colorData.Back.pointA.b,this.colorData.Back.pointA.ALPHA(),this.colorData.Back.pointB.r,this.colorData.Back.pointB.g,this.colorData.Back.pointB.b,this.colorData.Back.pointB.ALPHA(),this.colorData.Back.pointC.r,this.colorData.Back.pointC.g,this.colorData.Back.pointC.b,this.colorData.Back.pointC.ALPHA(),this.colorData.Left.pointA.r,this.colorData.Left.pointA.g,this.colorData.Left.pointA.b,this.colorData.Left.pointA.ALPHA(),this.colorData.Left.pointB.r,this.colorData.Left.pointB.g,this.colorData.Left.pointB.b,this.colorData.Left.pointB.ALPHA(),this.colorData.Left.pointC.r,this.colorData.Left.pointC.g,this.colorData.Left.pointC.b,this.colorData.Left.pointC.ALPHA(),this.colorData.Bottom.pointA.r,this.colorData.Bottom.pointA.g,this.colorData.Bottom.pointA.b,this.colorData.Bottom.pointA.ALPHA(),this.colorData.Bottom.pointB.r,this.colorData.Bottom.pointB.g,this.colorData.Bottom.pointB.b,this.colorData.Bottom.pointB.ALPHA(),this.colorData.Bottom.pointC.r,this.colorData.Bottom.pointC.g,this.colorData.Bottom.pointC.b,this.colorData.Bottom.pointC.ALPHA(),this.colorData.BottomRight.pointA.r,this.colorData.BottomRight.pointA.g,this.colorData.BottomRight.pointA.b,this.colorData.BottomRight.pointA.ALPHA(),this.colorData.BottomRight.pointB.r,this.colorData.BottomRight.pointB.g,this.colorData.BottomRight.pointB.b,this.colorData.BottomRight.pointB.ALPHA(),this.colorData.BottomRight.pointC.r,this.colorData.BottomRight.pointC.g,this.colorData.BottomRight.pointC.b,this.colorData.BottomRight.pointC.ALPHA()])}get vertices(){return new Float32Array([0,this.basePoint+this.spitz,0,this.basePointNeg,this.basePointNeg,this.basePoint,this.basePoint,this.basePointNeg,this.basePoint,0,this.basePoint+this.spitz,0,this.basePoint,this.basePointNeg,this.basePoint,this.basePoint,this.basePointNeg,this.basePointNeg,0,this.basePoint+this.spitz,0,this.basePoint,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,0,this.basePoint+this.spitz,0,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePoint,this.basePointNeg,this.basePointNeg,this.basePoint,this.basePoint,this.basePointNeg,this.basePoint,this.basePoint,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePoint,this.basePoint,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg,this.basePointNeg])}};o.sphereVertex=class{createGeoData(t){this.size=t.size,this.basePoint=+this.size,this.basePointNeg=-1*this.size,this.dynamicBuffer=!0,this.latitudeBands=t.latitudeBands,this.longitudeBands=t.longitudeBands,this.radius=t.radius,this.vertexPositionData=[],this.normalData=[],this.textureCoordData=[];for(var e=0;e<=this.latitudeBands;e++)for(var o=e*Math.PI/this.latitudeBands,r=Math.sin(o),i=Math.cos(o),a=0;a<=this.longitudeBands;a++){var n=2*a*Math.PI/this.longitudeBands,s=Math.sin(n),l=Math.cos(n)*r,d=i,h=s*r,n=1-a/this.longitudeBands,s=1-e/this.latitudeBands;this.normalData.push(l),this.normalData.push(d),this.normalData.push(h),this.textureCoordData.push(n),this.textureCoordData.push(s),this.vertexPositionData.push(this.radius*l),this.vertexPositionData.push(this.radius*d),this.vertexPositionData.push(this.radius*h)}this.indexData=[];for(e=0;e<this.latitudeBands;e++)for(a=0;a<this.longitudeBands;a++){var u=e*(this.longitudeBands+1)+a,g=u+this.longitudeBands+1;this.indexData.push(u),this.indexData.push(g),this.indexData.push(u+1),this.indexData.push(g),this.indexData.push(g+1),this.indexData.push(u+1)}}constructor(t){this.root=t,this.createGeoData(this.root)}setRadius(t){this.radius=t,this.root.radius=t,1==this.dynamicBuffer&&(this.createGeoData(this.root),s.default.operation.sphere_buffer_procedure(this.root))}get vertices(){return new Float32Array(this.vertexPositionData)}get texCoords(){return new Float32Array(this.textureCoordData)}get normals(){return new Float32Array(this.normalData)}get indices(){return this.indexData}};function l(t,e,o,r){var i=this;i.r=parseFloat(t),i.g=parseFloat(e),i.b=parseFloat(o),void 0===r&&(r=1),i.a=parseFloat(r),i.R=function(){return parseFloat(i.r)},i.G=function(){return parseFloat(i.g)},i.B=function(){return parseFloat(i.b)},i.ALPHA=function(){return parseFloat(i.a)},i.set=function(t,e,o,r){i.r=parseFloat(t),i.g=parseFloat(e),i.b=parseFloat(o),i.a=parseFloat(r)},i.print=function(){console.log("color data RGB format : R:"+i.r+"  G:"+i.g+"  B:"+i.b+"  ALPHA:"+i.ALPHA)}}o.customVertex=class{createGeoData(t){if(this.size=t.size,this.basePoint=+this.size,this.basePointNeg=-1*this.size,this.dynamicBuffer=!0,this.latitudeBands=t.latitudeBands,this.longitudeBands=t.longitudeBands,this.radius=t.radius,this.vertexPositionData=[],this.normalData=[],this.textureCoordData=[],"spiral"==this.root.custom_type){for(var e=0;e<=this.latitudeBands;e++)for(var o=e*Math.PI/this.latitudeBands,r=(Math.sin(o),Math.cos(o),0);r<=this.longitudeBands;r++){var i=2*r*Math.PI/this.longitudeBands,a=Math.sin(i),i=Math.cos(i),n=e*i,s=r*a,l=r*i,d=1-r/this.longitudeBands,h=1-e/this.latitudeBands;this.normalData.push(n),this.normalData.push(s),this.normalData.push(l),this.textureCoordData.push(d),this.textureCoordData.push(h),this.vertexPositionData.push(this.radius*n),this.vertexPositionData.push(this.radius*s),this.vertexPositionData.push(this.radius*l)}this.indexData=[];for(e=0;e<this.latitudeBands;e++)for(r=0;r<this.longitudeBands;r++){var u=(c=e*(this.longitudeBands+1)+r)+this.longitudeBands+1;this.indexData.push(c),this.indexData.push(u),this.indexData.push(c+1),this.indexData.push(u),this.indexData.push(u+1),this.indexData.push(c+1)}}else if("cubic"==this.root.custom_type){for(var g=0;g<8;g++){n=g+ +S1.GET(),s=1,l=g+1;this.normalData.push(n),this.normalData.push(s),this.normalData.push(l),this.textureCoordData.push(d),this.textureCoordData.push(h),this.vertexPositionData.push(this.radius*n),this.vertexPositionData.push(this.radius*s),this.vertexPositionData.push(this.radius*l)}this.indexData=[];for(g=0;g<8;g++){var c,u=(c=12+g)+2+1;this.indexData.push(c),this.indexData.push(u),this.indexData.push(c+1),this.indexData.push(u),this.indexData.push(u+1),this.indexData.push(c+1)}}}constructor(t){this.root=t,this.createGeoData(this.root)}setRadius(t){return this.radius=t,this.root.radius=t,1==this.dynamicBuffer?(this.createGeoData(this.root),s.default.operation.sphere_buffer_procedure(this.root),void(this.root.glDrawElements.numberOfIndicesRender=this.indices.length)):(s.default.operation.sphere_buffer_procedure(this.root),this.root.glDrawElements.numberOfIndicesRender=this.indices.length,"dynamicBuffer is false but i will update vertex array prototypical.")}get vertices(){return new Float32Array(this.vertexPositionData)}get texCoords(){return new Float32Array(this.textureCoordData)}get normals(){return new Float32Array(this.normalData)}get indices(){return this.indexData}};o.customVertex_1=class{createGeoData(t){for(var e=new Float32Array(192),o=new Float32Array(192),r=new Float32Array(128),i=new Uint16Array(192),a=2*Math.PI/32,n=0,s=0,l=0,d=0;d<32;d++){var h=Math.cos(a*d),u=Math.sin(a*d);e[n++]=.25*h,e[n++]=.25*u,e[n++]=0,r[s++]=.5+.5*h*.5,r[s++]=.5+.5*u*.5,e[n++]=.5*h,e[n++]=.5*u,e[n++]=0,r[s++]=.5+.5*h,r[s++]=.5+.5*u}for(d=0;d<31;d++)i[l++]=2*d,i[l++]=2*d+1,i[l++]=2*d+3,i[l++]=2*d,i[l++]=2*d+3,i[l++]=2*d+2;for(i[l++]=2*d,i[l++]=2*d+1,i[l++]=1,i[l++]=2*d,i[l++]=1,d=i[l++]=0;d<64;d++)o[3*d]=o[3*d+1]=0,o[3*d+2]=1}}},{"../program/manifest":20,"./utility":16}],11:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.callReDraw_=o.reDrawID=o.animate=void 0;var r,i=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},a=t("./matrix-world"),n=t("./engine"),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=l(e);if(e&&e.has(t))return e.get(t);var o,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in t){var a;"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&((a=i?Object.getOwnPropertyDescriptor(t,o):null)&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o])}r.default=t,e&&e.set(t,r);return r}(t("./raycast"));function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(l=function(t){return t?o:e})(t)}o.animate=function(t){var e=(new Date).getTime();0!=n.lastTime&&(e=e-n.lastTime,t.rotation.rotx+=t.rotation.rotSpeedX*e/1e3,t.rotation.roty+=t.rotation.rotSpeedY*e/1e3,t.rotation.rotz+=t.rotation.rotSpeedZ*e/1e3,t.position.update())};var d=o.reDrawID=0;i.default.operation.reDrawGlobal=function(){(0,n.modifyLooper)(0),o.reDrawID=requestAnimationFrame(a.reDraw),a.world.renderPerspective();for(var t=0;t<i.default.updateBeforeDraw.length;t++)i.default.updateBeforeDraw[t].UPDATE();for(;n.looper<=a.world.contentList.length-1;)"triangle"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawTriangle(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"square"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawSquare(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"cube"==a.world.contentList[n.looper].type||"cubeTex"==a.world.contentList[n.looper].type||"cubeLightTex"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawCube(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"pyramid"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawPyramid(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"obj"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawObj(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"squareTex"==a.world.contentList[n.looper].type?(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawSquareTex(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])):"sphereLightTex"!=a.world.contentList[n.looper].type&&"sphere"!=a.world.contentList[n.looper].type&&"generatorLightTex"!=a.world.contentList[n.looper].type||(a.world.GL.gl.useProgram(a.world.contentList[n.looper].shaderProgram),a.world.drawSphere(a.world.contentList[n.looper]),a.world.animate(a.world.contentList[n.looper])),(0,n.modifyLooper)(n.looper+1);i.default.raycast&&d<=2&&(s.touchCoordinate.enabled=!1,d=0),d++,(0,n.updateFPS)(1)},i.default.operation.CameraPerspective=function(){this.GL.gl.viewport(0,0,canvas.width,canvas.height),this.GL.gl.clear(this.GL.gl.COLOR_BUFFER_BIT|this.GL.gl.DEPTH_BUFFER_BIT),mat4.perspective(this.pMatrix,degToRad(i.default.camera.viewAngle),this.GL.gl.viewportWidth/this.GL.gl.viewportHeight,i.default.camera.nearViewpoint,i.default.camera.farViewpoint)};o.callReDraw_=function(){requestAnimationFrame(a.reDraw)}},{"../program/manifest":20,"./engine":4,"./matrix-world":14,"./raycast":15}],12:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.MatrixButton=o.MatrixLightDirection=o.MatrixLightComponent=void 0;class r extends HTMLElement{constructor(...t){super(...t);const e=this.attachShadow({mode:"open"});let o=document.createElement("input");o.setAttribute("id",this.getAttribute("id")),o.setAttribute("type",this.getAttribute("type")),o.setAttribute("value",this.getAttribute("value")),o.addEventListener("focus",()=>{}),o.addEventListener("change",t=>{console.log("color comp changed",t.path[0].value),this.setAttribute("value",t.path[0].value)}),e.appendChild(o)}}o.MatrixLightComponent=r;class i extends HTMLElement{constructor(...t){super(...t);const e=this.attachShadow({mode:"open"});let o=document.createElement("input");o.setAttribute("id",this.getAttribute("id")),o.setAttribute("type",this.getAttribute("type")),o.setAttribute("data-r",this.getAttribute("data-r")),o.setAttribute("data-g",this.getAttribute("data-g")),o.setAttribute("data-b",this.getAttribute("data-b")),e.appendChild(o)}}o.MatrixLightDirection=i;class a extends HTMLButtonElement{constructor(...t){super(...t);const e=this.attachShadow({mode:"open"});let o=document.createElement("input");o.setAttribute("type",this.getAttribute("type")),e.appendChild(o),this.addEventListener("focus",()=>{console.log("Focus on matrix-engine-btn")})}}o.MatrixButton=a},{}],13:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r,i=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},a=t("./matrix-world");i.default.tools.loadTextureImage=function(t,e){var o=t.createTexture();return o.image=new Image,o.image.crossOrigin="anonymous",o.image.onload=function(){a.world.handleLoadedTexture(o,t)},o.image.src=e,o},i.default.tools.BasicTextures=function(t,e){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.image),e.bindTexture(e.TEXTURE_2D,null)},i.default.tools.loadVideoTexture=function(t,e){var o;e&&1!=e.width&&(o=a.world.GL.gl,void 0===i.default.textures[t=t]&&(i.default.textures[t]=o.createTexture()),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i.default.textures[t]),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),o.generateMipmap(o.TEXTURE_2D))};var n=i.default.textools;o.default=n},{"../program/manifest":20,"./matrix-world":14}],14:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.modifyFrames=function(t){o.frames=n=t},o.defineworld=function(t){{if(o.world=L=new Object,L.GL=new m.defineWebGLWorld(t),void 0===L.GL.gl)return delete this.GL,0;L.GL.gl.clearColor(c.default.glBackgroundColor.r,c.default.glBackgroundColor.g,c.default.glBackgroundColor.b,c.default.glBackgroundColor.a),L.GL.gl.enable(L.GL.gl.DEPTH_TEST),(0,m.initiateFPS)()}return L.pMatrix=mat4.create(),L.mvMatrixStack=new Array,L.contentList=new Array,s[s.length]=L,c.default.limitations.maxTexturesInFragmentShader=L.GL.gl.getParameter(L.GL.gl.MAX_TEXTURE_IMAGE_UNITS),c.default.limitations.ALIASED_POINT_SIZE_RANGE=L.GL.gl.getParameter(L.GL.gl.ALIASED_POINT_SIZE_RANGE),c.default.limitations.DEPTH_BITS=L.GL.gl.getParameter(L.GL.gl.DEPTH_BITS),c.default.limitations.MAX_SAMPLES=L.GL.gl.getParameter(L.GL.gl.MAX_SAMPLES),c.default.limitations.MAX_TEXTURE_SIZE=L.GL.gl.getParameter(L.GL.gl.MAX_TEXTURE_SIZE),c.default.limitations.MAX_VERTEX_ATTRIBS=L.GL.gl.getParameter(L.GL.gl.MAX_VERTEX_ATTRIBS),c.default.limitations.MAX_ELEMENTS_VERTICES=L.GL.gl.getParameter(L.GL.gl.MAX_ELEMENTS_VERTICES),L.getShader=m.loadShaders,L.initShaders=m.initShaders,L.handleLoadedTexture=c.default.tools.BasicTextures,L.initTexture=c.default.tools.loadTextureImage,L.disableUnusedAttr=function(t,e){for(var o=e;o<4;)t.disableVertexAttribArray(o),o+=1},L.mvPushMatrix=c.default.operation.PUSH_MATRIX,L.mvPopMatrix=c.default.operation.POP_MATRIX,L.setMatrixUniforms=c.default.operation.SET_MATRIX_UNIFORMS,L.renderPerspective=c.default.operation.CameraPerspective,L.animate=r.animate,L.bufferTriangle=c.default.operation.triangle_buffer_procedure,L.drawTriangle=c.default.operation.draws.triangle,L.bufferSquare=c.default.operation.square_buffer_procedure,L.drawSquare=c.default.operation.draws.square,L.bufferObj=c.default.operation.obj_buffer_procedure,L.bufferCube=c.default.operation.cube_buffer_procedure,L.drawCube=c.default.operation.draws.cube,L.bufferPyramid=c.default.operation.piramide_buffer_procedure,L.drawPyramid=c.default.operation.draws.piramide,L.drawObj=c.default.operation.draws.drawObj,L.bufferSquareTex=c.default.operation.squareTex_buffer_procedure,L.drawSquareTex=c.default.operation.draws.drawSquareTex,L.drawSprite2d=c.default.operation.draws.sprite2d,L.bufferSprite2d=c.default.operation.sprite2d_buffer_procedure,L.drawSphere=c.default.operation.draws.sphere,L.bufferSphere=c.default.operation.sphere_buffer_procedure,o.reDraw=l=c.default.operation.reDrawGlobal,L.Add=function(t,e,o,r,i,a){var n,s,l;if("triangle"==t&&((s=new Object).name=void 0!==o?o:"triangle_instance_"+Math.floor(1e5*Math.random()+1),s.streamTextures=null,s.type=t,s.size=e,s.sides=3,s.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs"),s.position=new p.Position(0,0,-5),s.rotation=new p.RotationVector(1,0,0),s.color=new p.GeoOfColor("triangle"),s.mvMatrix=mat4.create(),s.geometry=new p.TriangleVertex(s),s.glBlend=new f._glBlend,s.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},s.shaderProgram&&(this.bufferTriangle(s),s.glDrawElements=new f._DrawElements(s.vertexColorBuffer.numItems),this.contentList[this.contentList.length]=s,c.default.scene[s.name]=s)),"square"==t&&((n=new Object).name=void 0!==o?o:"square_instance_"+Math.floor(1e5*Math.random()+1),n.streamTextures=null,n.type=t,n.size=e,n.sides=4,n.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs"),n.position=new p.Position(0,0,-5),n.rotation=new p.RotationVector(1,0,0),n.color=!0,n.mvMatrix=mat4.create(),n.geometry=new p.SquareVertex(n),n.glBlend=new f._glBlend,n.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},n.shaderProgram&&(this.bufferSquare(n),n.glDrawElements=new f._DrawElements(n.vertexColorBuffer.numItems),n.glDrawElements.mode="TRIANGLE_STRIP",this.contentList[this.contentList.length]=n,c.default.scene[n.name]=n)),"squareTex"==t){if((n=new Object).name=void 0!==o?o:"square_instance_"+Math.floor(1e5*Math.random()+1),n.streamTextures=null,n.type=t,n.size=e,n.sides=4,n.position=new p.Position(0,0,-5),n.rotation=new p.RotationVector(1,0,0),n.mvMatrix=mat4.create(),n.geometry=new p.SquareVertex(n),n.glBlend=new f._glBlend,n.LightsData={directionLight:new p.COLOR(1,1,1),ambientLight:new p.COLOR(1,1,1),lightingDirection:new p.COLOR(1,1,0)},void 0!==r)if("string"==typeof r)n.texture=this.initTexture(this.GL.gl,r),n.textures=[],n.textures[0]=n.texture;else if("object"==typeof r){n.textures=[],n.texture=!0,(0,m.RegenerateShader)(t+"-shader-fs",r.source.length,r.mix_operation);for(var d=0;d<r.source.length;++d)n.textures.push(this.initTexture(this.GL.gl,r.source[d]));n.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs")}else alert("Exec add obj : texturePaths : path is unknow typeof");else n.texture=this.initTexture(this.GL.gl,"res/images/icon2.jpg"),n.textures[0]=n.texture,n.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs");n.LightMap=new p.GeoOfColor("square"),n.custom=new Object,n.custom.gl_texture=null,n.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},n.shaderProgram&&(this.bufferSquareTex(n),n.glDrawElements=new f._DrawElements(n.vertexIndexBuffer.numItems),this.contentList[this.contentList.length]=n,c.default.scene[n.name]=n)}if("cube"==t&&((l=new Object).name=void 0!==o?o:"cube_instance_"+Math.floor(1e5*Math.random()+1),l.streamTextures=null,l.type=t,l.size=e,l.sides=12,l.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs"),l.position=new p.Position(0,0,-5),l.rotation=new p.RotationVector(1,0,0),l.color=!0,l.mvMatrix=mat4.create(),l.geometry=new p.CubeVertex(l),l.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},l.glBlend=new f._glBlend,l.shaderProgram&&l.geometry&&(this.bufferCube(l),l.glDrawElements=new f._DrawElements(l.vertexIndexBuffer.numItems),this.contentList[this.contentList.length]=l,c.default.scene[l.name]=l)),"sphereTex"==t||"sphereLightTex"==t){var h=new Object;if(h.name=void 0!==o?o:"sphereObject_instance_"+Math.floor(1e5*Math.random()+1),h.streamTextures=null,h.type=t,h.position=new p.Position(0,0,-5),h.size=e,h.sides=12,h.rotation=new p.RotationVector(0,1,0),h.LightsData={directionLight:new p.COLOR(1,1,1),ambientLight:new p.COLOR(1,1,1),lightingDirection:new p.COLOR(1,1,0)},h.textures=[],void 0!==r)if("string"==typeof r)h.texture=this.initTexture(this.GL.gl,r),h.textures.push(l.texture);else if("object"==typeof r){h.textures=[],h.texture=!0,(0,m.RegenerateShader)(t+"-shader-fs",r.source.length,r.mix_operation);for(d=0;d<r.source.length;++d)h.textures.push(this.initTexture(this.GL.gl,r.source[d]));h.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs")}else alert("Exec add obj : texturePaths : path is unknow typeof");else h.texture=this.initTexture(this.GL.gl,"res/images/texture_spiral1.png"),h.textures.push(h.texture),h.texture=!0,h.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs");h.changeMaterial=function(t){(0,m.RegenerateShader)(this.type+"-shader-fs",t.source.length,t.mix_operation);for(var e=0;e<t.source.length;++e)this.textures.push(L.initTexture(L.GL.gl,t.source[e]));this.shaderProgram=L.initShaders(L.GL.gl,this.type+"-shader-fs",this.type+"-shader-vs")},h.changeShader=function(t,e){RegenerateCustomShader(this.type+"-shader-fs",t.source.length,t.mix_operation,e);for(var o=0;o<t.source.length;++o)this.textures.push(L.initTexture(L.GL.gl,t.source[o]));this.shaderProgram=L.initShaders(L.GL.gl,this.type+"-shader-fs",this.type+"-shader-vs")},h.mvMatrix=mat4.create(),(h.LightMap=void 0)!==i?(h.latitudeBands=i.latitudeBands,h.longitudeBands=i.longitudeBands,h.radius=i.radius*h.size):(h.latitudeBands=30,h.longitudeBands=30,h.radius=h.size),h.geometry=new p.sphereVertex(h),h.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},h.glBlend=new f._glBlend,h.shaderProgram&&(this.bufferSphere(h),h.glDrawElements=new f._DrawElements(h.vertexIndexBuffer.numItems),this.contentList[this.contentList.length]=h,c.default.scene[h.name]=h)}if("pyramid"==t&&((s=new Object).name=void 0!==o?o:"pyramid_instance_"+Math.floor(1e5*Math.random()+1),s.streamTextures=null,s.type=t,s.size=e,s.sides=8,s.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs"),s.position=new p.Position(0,0,-5),s.rotation=new p.RotationVector(1,0,0),s.mvMatrix=mat4.create(),s.geometry=new p.PiramideVertex(s),s.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},s.glBlend=new f._glBlend,s.shaderProgram&&(this.bufferPyramid(s),s.glDrawElements=new f._DrawElements(s.vertexColorBuffer.numItems),this.contentList[this.contentList.length]=s,c.default.scene[s.name]=s)),"obj"==t){var u=new Object;if(u.name=void 0!==o?o:"obj_instance_"+Math.floor(1e5*Math.random()+1),u.streamTextures=null,u.type=t,u.size=e,u.sides=8,u.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs"),u.position=new p.Position(0,-5,-8),u.rotation=new p.RotationVector(0,1,0),u.color=!1,u.custom=new Object,u.custom.gl_texture=null,u.glDrawElements=new f._DrawElements(i.indexBuffer.numItems),u.glBlend=new f._glBlend,u.LightsData={directionLight:new p.COLOR(5,5,5),ambientLight:new p.COLOR(1,1,1),lightingDirection:new p.COLOR(0,1,0)},void 0!==r){if("string"==typeof r)u.texture=this.initTexture(this.GL.gl,r),u.textures=[],u.textures_texParameteri=[],u.textures[0]=u.texture;else if("object"==typeof r){u.textures=[],u.textures_texParameteri=[],u.texture=!0,(0,m.RegenerateShader)(t+"-shader-fs",r.source.length,r.mix_operation);for(d=0;d<r.source.length;++d)u.textures.push(this.initTexture(this.GL.gl,r.source[d])),u.textures_texParameteri.push(new f._glTexParameteri("TEXTURE_2D","TEXTURE_MAG_FILTER","LINEAR"));u.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs")}}else u.texture=this.initTexture(this.GL.gl,"res/images/texture_spiral1.png"),u.textures=[],u.textures[0]=u.texture;u.LightMap=new p.GeoOfColor("square"),u.changeMaterial=function(t){(0,m.RegenerateShader)(this.type+"-shader-fs",t.source.length,t.mix_operation);for(var e=0;e<t.source.length;++e)this.textures.push(L.initTexture(L.GL.gl,t.source[e]));this.shaderProgram=L.initShaders(L.GL.gl,this.type+"-shader-fs",this.type+"-shader-vs")},u.mvMatrix=mat4.create(),u.animation=void 0===a||null==typeof a?null:{id:a.id,sumOfAniFrames:a.sumOfAniFrames,currentAni:a.currentAni,speed:a.speed,currentDraws:0},u.mesh=i,u.shaderProgram&&(this.bufferObj(u),this.contentList[this.contentList.length]=u,c.default.scene[u.name]=u)}if("cubeTex"==t||"cubeLightTex"==t){if((l=new Object).name=void 0!==o?o:"cube_instance_"+Math.floor(1e5*Math.random()+1),l.streamTextures=null,l.type=t,l.position=new p.Position(0,0,-5),l.size=e,l.sides=12,l.rotation=new p.RotationVector(0,1,0),l.LightsData={directionLight:new p.COLOR(1,1,1),ambientLight:new p.COLOR(1,1,1),lightingDirection:new p.COLOR(1,1,0)},l.textures=[],l.custom=new Object,l.custom.gl_texture=null,void 0!==r){if("string"==typeof r)l.texture=this.initTexture(this.GL.gl,r),l.textures.push(l.texture);else if("object"==typeof r){l.textures=[],l.texture=!0,(0,m.RegenerateShader)(t+"-shader-fs",r.source.length,r.mix_operation);for(d=0;d<r.source.length;++d)l.textures.push(this.initTexture(this.GL.gl,r.source[d]));l.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs")}}else l.texture=this.initTexture(this.GL.gl,"res/images/texture_spiral1.png"),l.textures.push(l.texture),l.texture=!0,l.shaderProgram=this.initShaders(this.GL.gl,t+"-shader-fs",t+"-shader-vs");l.changeMaterial=function(t){(0,m.RegenerateShader)(this.type+"-shader-fs",t.source.length,t.mix_operation);for(var e=0;e<t.source.length;++e)this.textures.push(L.initTexture(L.GL.gl,t.source[e]));this.shaderProgram=L.initShaders(L.GL.gl,this.type+"-shader-fs",this.type+"-shader-vs")},l.mvMatrix=mat4.create(),l.LightMap=new p.GeoOfColor("cube light"),l.geometry=new p.CubeVertex(l),l.instancedDraws={numberOfInstance:10,array_of_local_offset:[12,0,0],overrideDrawArraysInstance:function(t){}},l.glBlend=new f._glBlend,l.shaderProgram&&(this.bufferCube(l),l.glDrawElements=new f._DrawElements(l.vertexIndexBuffer.numItems),this.contentList[this.contentList.length]=l,c.default.scene[l.name]=l)}if("generatorTex"==t||"generatorLightTex"==t){var g=new Object;if(g.name=void 0!==o?o:"customObject_instance_"+Math.floor(1e5*Math.random()+1),g.streamTextures=null,g.type=t,g.position=new p.Position(0,0,-5),g.size=e,g.sides=12,g.rotation=new p.RotationVector(0,1,0),g.LightsData={directionLight:new p.COLOR(1,1,1),ambientLight:new p.COLOR(1,1,1),lightingDirection:new p.COLOR(1,1,0)},g.textures=[],void 0!==r)if("string"==typeof r)g.texture=this.initTexture(this.GL.gl,r),g.textures.push(g.texture);else if("object"==typeof r){g.textures=[],g.texture=!0,(0,m.RegenerateShader)("sphereLightTex-shader-fs",r.source.length,r.mix_operation);for(d=0;d<r.source.length;++d)g.textures.push(this.initTexture(this.GL.gl,r.source[d]));g.shaderProgram=this.initShaders(this.GL.gl,"sphereLightTex-shader-fs","sphereLightTex-shader-vs")}else alert("Exec add obj : texturePaths : path is unknow typeof");else g.texture=this.initTexture(this.GL.gl,"res/images/texture_spiral1.png"),g.textures.push(g.texture),g.texture=!0,g.shaderProgram=this.initShaders(this.GL.gl,"sphereLightTex-shader-fs","sphereLightTex-shader-vs");g.changeMaterial=function(t){(0,m.RegenerateShader)("sphereLightTex-shader-fs",t.source.length,t.mix_operation);for(var e=0;e<t.source.length;++e)this.textures.push(L.initTexture(L.GL.gl,t.source[e]));this.shaderProgram=L.initShaders(L.GL.gl,"sphereLightTex-shader-fs","sphereLightTex-shader-vs")},g.mvMatrix=mat4.create(),(g.LightMap=void 0)!==i?(g.latitudeBands=i.latitudeBands,g.longitudeBands=i.longitudeBands,g.radius=i.radius,g.custom_type=i.custom_type):(g.latitudeBands=30,g.longitudeBands=30,g.radius=2),g.geometry=new p.customVertex(g),g.glBlend=new f._glBlend,g.shaderProgram&&(this.bufferSphere(g),g.glDrawElements=new f._DrawElements(g.vertexIndexBuffer.numItems),this.contentList[this.contentList.length]=g,c.default.scene[g.name]=g)}},L.callReDraw=r.callReDraw_,L.destroy=c.default.operation.destroyWorld,L},o.reDraw=o.objListToDispose=o.world=o.frames=void 0;var c=a(t("../program/manifest")),m=t("./engine"),r=t("./matrix-render"),i=(a(t("./matrix-draws")),t("./matrix-tags")),f=t("./utility"),p=t("./matrix-geometry");function a(t){return t&&t.__esModule?t:{default:t}}var n=0;o.frames=n;var L={};o.world=L;var s=new Array;o.objListToDispose=s;var l=null;o.reDraw=l,window.customElements.define("matrix-dir-light",i.MatrixLightDirection),window.customElements.define("matrix-light",i.MatrixLightComponent)},{"../program/manifest":20,"./engine":4,"./matrix-draws":9,"./matrix-geometry":10,"./matrix-render":11,"./matrix-tags":12,"./utility":16}],15:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.rayIntersectsTriangle=v,o.unproject=B,o.rotate2dPlot=_,o.checkingProcedure=function(t){var{clientX:e,clientY:o}=t;E.x=e,E.y=o,E.w=t.target.width,E.h=t.target.height,E.enabled=!0},o.checkingProcedureCalc=function(o){var t=matrixEngine.matrixWorld.world;if(0!=E.enabled){var r,i=[...o.mvMatrix],a=mat4.create(),n=mat4.create();let e=vec3.fromValues(matrixEngine.Events.camera.xPos,matrixEngine.Events.camera.yPos,matrixEngine.Events.camera.zPos);matrixEngine.Events.camera.zPos<o.position.z&&(e=vec3.fromValues(matrixEngine.Events.camera.xPos,matrixEngine.Events.camera.yPos,-matrixEngine.Events.camera.zPos)),r=B([E.x,E.y],[0,0,E.w,E.h],mat4.invert(a,t.pMatrix),mat4.invert(n,i));var s=vec3.create();o.raycastFace=[];for(var l=0;l<o.geometry.indices.length;l+=3){var d=o.geometry.indices[l],h=o.geometry.indices[l+1],u=o.geometry.indices[l+2];let t=null;var g,c,m,f,p,L,x,w,b,u=[[o.geometry.vertices[0+3*d],o.geometry.vertices[1+3*d],o.geometry.vertices[2+3*d]],[o.geometry.vertices[0+3*h],o.geometry.vertices[1+3*h],o.geometry.vertices[2+3*h]],[o.geometry.vertices[0+3*u],o.geometry.vertices[1+3*u],o.geometry.vertices[2+3*u]]];0!=o.rotation.rx&&(g=_(0,0,u[0][1],u[0][2],o.rotation.rx),c=_(0,0,u[1][1],u[1][2],o.rotation.rx),m=_(0,0,u[2][1],u[2][2],o.rotation.rx),t=[[u[0][0]+o.position.worldLocation[0],g[0]+o.position.worldLocation[1],g[1]],[u[1][0]+o.position.worldLocation[0],c[0]+o.position.worldLocation[1],c[1]],[u[2][0]+o.position.worldLocation[0],m[0]+o.position.worldLocation[1],m[1]]]),0!=o.rotation.ry&&(0!=o.rotation.rx?(g=_(0,0,u[0][1],u[0][2],o.rotation.rx-90),c=_(0,0,u[1][1],u[1][2],o.rotation.rx-90),m=_(0,0,u[2][1],u[2][2],o.rotation.rx-90),f=g[0],p=c[0],L=m[0],x=g[1],w=c[1],b=m[1],g=_(0,0,u[0][0],x,o.rotation.ry-90),c=_(0,0,u[1][0],w,o.rotation.ry-90),m=_(0,0,u[2][0],b,o.rotation.ry-90),x=g[1],w=c[1],b=m[1],g=_(0,0,g[0],f,o.rotation.rz-90),c=_(0,0,c[0],p,o.rotation.rz-90),m=_(0,0,m[0],L,o.rotation.rz-90),t=[[g[0]+o.position.worldLocation[0],g[1]+o.position.worldLocation[1],x],[c[0]+o.position.worldLocation[0],c[1]+o.position.worldLocation[1],w],[m[0]+o.position.worldLocation[0],m[1]+o.position.worldLocation[1],b]]):0==o.rotation.rz&&(g=_(0,0,u[0][0],u[0][2],-o.rotation.ry),c=_(0,0,u[1][0],u[1][2],-o.rotation.ry),m=_(0,0,u[2][0],u[2][2],-o.rotation.ry),t=[[g[0]+o.position.worldLocation[0],u[0][1]+o.position.worldLocation[1],g[1]],[c[0]+o.position.worldLocation[0],u[1][1]+o.position.worldLocation[1],c[1]],[m[0]+o.position.worldLocation[0],u[2][1]+o.position.worldLocation[1],m[1]]])),0!=o.rotation.rz&&(0!=o.rotation.ry?180==o.rotation.rx&&(g=_(0,0,u[0][0],u[0][2],o.rotation.ry),c=_(0,0,u[1][0],u[1][2],o.rotation.ry),m=_(0,0,u[2][0],u[2][2],o.rotation.ry),f=g[1],p=c[1],L=m[1],g=_(0,0,g[0],u[0][1],o.rotation.rz),c=_(0,0,c[0],u[1][1],o.rotation.rz),m=_(0,0,m[0],u[2][1],o.rotation.rz),x=g[1],w=c[1],b=m[1],t=[[g[0]+o.position.worldLocation[0],x+o.position.worldLocation[1],f],[c[0]+o.position.worldLocation[0],w+o.position.worldLocation[1],p],[m[0]+o.position.worldLocation[0],b+o.position.worldLocation[1],L]]):0==o.rotation.rx?(g=_(0,0,u[0][0],u[0][1],o.rotation.rz),c=_(0,0,u[1][0],u[1][1],o.rotation.rz),m=_(0,0,u[2][0],u[2][1],o.rotation.rz),t=[[g[0]+o.position.worldLocation[0],g[1]+o.position.worldLocation[1],u[0][2]],[c[0]+o.position.worldLocation[0],c[1]+o.position.worldLocation[1],u[1][2]],[m[0]+o.position.worldLocation[0],m[1]+o.position.worldLocation[1],u[2][2]]]):console.info("must be handled rz vs rx")),0==o.rotation.rx&&0==o.rotation.ry&&0==o.rotation.rz&&(t=[[u[0][0]+o.position.worldLocation[0],u[0][1]+o.position.worldLocation[1],u[0][2]],[u[1][0]+o.position.worldLocation[0],u[1][1]+o.position.worldLocation[1],u[1][2]],[u[2][0]+o.position.worldLocation[0],u[2][1]+o.position.worldLocation[1],u[2][2]]]),o.raycastFace.push(t),v(e,r,t,s,o.position)&&(A=new CustomEvent("ray.hit.event",{detail:{touchCoordinate:{x:E.x,y:E.y},hitObject:o,intersectionPoint:s,ray:r,rayOrigin:e}}),dispatchEvent(A),1==E.enabled&&1==E.stopOnFirstDetectedHit&&(E.enabled=!1),console.info("raycast hits for Object: "+o.name+"  -> face[/3]  : "+l+" -> intersectionPoint: "+s))}}},o.touchCoordinate=void 0;let A,E={enabled:!1,x:0,y:0,stopOnFirstDetectedHit:!1};function v(t,e,o,r,i){matrixEngine.Events.camera.zPos<i.z?t[2]=matrixEngine.Events.camera.zPos-i.z:t[2]=matrixEngine.Events.camera.zPos+-i.z,t[0]=matrixEngine.Events.camera.xPos,t[1]=matrixEngine.Events.camera.yPos;var[a,n,s]=o,l=vec3.create(),i=vec3.create(),o=vec3.create();vec3.sub(l,n,a),vec3.sub(i,s,a),vec3.cross(o,e,i);n=vec3.dot(l,o);if(-1e-7<n&&n<1e-7)return!1;s=vec3.create();vec3.sub(s,t,a);a=vec3.dot(s,o);if(a<0||n<a)return!1;o=vec3.create();vec3.cross(o,s,l);l=vec3.dot(e,o);if(l<0||n<a+l)return!1;n=vec3.dot(i,o)/n;return 1e-7<n&&(r&&vec3.add(r,t,[e[0]*n,e[1]*n,e[2]*n]),!0)}function B(t,e,o,r){var[i,,a,n]=e,[e,t]=t;const s=vec4.fromValues(2*e/a-1-i,2*(n-t-1)/n-1,1,1);return vec4.transformMat4(s,s,o),s[3]=0,vec4.transformMat4(s,s,r),vec3.normalize(vec3.create(),s)}function _(t,e,o,r,i){var a=Math.PI/180*-i,i=Math.cos(a),a=Math.sin(a);return[i*(o-t)+a*(r-e)+t,i*(r-e)-a*(o-t)+e]}o.touchCoordinate=E},{}],16:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.isMobile=function(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(t=>navigator.userAgent.match(t))},o.LOG=function(){this.ENABLE=!0,this.LOG=function(t){1==this.ENABLE&&console.log("%c"+t,"background: #333; color: lime")},this.WARNING=function(t){1==this.ENABLE&&console.log("%c Warning : "+t,"background: #333; color: yellow")},this.CRITICAL=function(t){1==this.ENABLE&&console.log("%c Critical : "+t,"background: #333; color: red")},this.NETWORK_LOG=function(t){1==this.ENABLE&&console.log("%c Network view : "+t,"background: #333; color: #a7afaf")}},o.OSCILLATOR=function(t,e,o){{var r;"string"!=typeof t&&"number"!=typeof t||"string"!=typeof e&&"number"!=typeof e||"string"!=typeof o&&"number"!=typeof o?i.SYS.DEBUG.WARNING("SYS : warning for procedure 'SYS.MATH.OSCILLATOR' Desciption : Replace object with string or number, min >> "+typeof t+" and max >>"+typeof e+" and step >>"+typeof o+" << must be string or number."):((r=this).min=parseFloat(t),this.max=parseFloat(e),this.step=parseFloat(o),this.value_=parseFloat(t),this.status=0,this.on_maximum_value=function(){},this.on_minimum_value=function(){},this.UPDATE=function(t){return void 0===t?0==this.status&&this.value_<this.max?(this.value_=this.value_+this.step,this.value_>=this.max&&(this.value_=this.max,this.status=1,r.on_maximum_value()),this.value_):1==this.status&&this.value_>this.min?(this.value_=this.value_-this.step,this.value_<=this.min&&(this.value_=this.min,this.status=0,r.on_minimum_value()),this.value_):void 0:this.value_})}},o.SWITCHER=function(){var t=this;t.VALUE=1,t.GET=function(){return t.VALUE=-1*t.VALUE,t.VALUE}},o.RandomFloat=function(t,e){return highlightedNumber=Math.random()*(e-t)+t,highlightedNumber},o.randomIntFromTo=function(t,e){if("object"==typeof t||"object"==typeof e)i.SYS.DEBUG.WARNING("SYS : warning for procedure 'SYS.MATH.RANDOM_INT_FROM_TO' Desciption : Replace object with string , this >> "+typeof t+" and "+typeof t+" << must be string or number.");else{if(void 0!==t&&void 0!==e)return Math.floor(Math.random()*(e-t+1)+t);i.SYS.DEBUG.WARNING("SYS : warning for procedure 'SYS.MATH.RANDOM_INT_FROM_TO' Desciption : arguments (min, max) cant be undefined , this >> "+typeof t+" and "+typeof t+" << must be string or number.")}},o._glBlend=function(){var e=this;this.blendEnabled=!1,this.blendParamSrc="ONE",this.blendParamDest="ONE",this.depthParam="NOTEQUAL",this.setBothBlendParam=function(t){e.blendParamSrc=t,e.blendParamDest=t}},o._DrawElements=function(t){this.mode="TRIANGLES",this.modes=["POINTS","LINE_STRIP","LINE_LOOP","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","TRIANGLES"],this.type=["UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT"],this.indices="GL_ELEMENT_ARRAY_BUFFER",this.numberOfIndicesRender=t},o._glTexParameteri=function(t,e,o){this.target=void 0===t?"TEXTURE_2D":t;void 0===e||void 0===o?(this.pname="TEXTURE_MAG_FILTER",this.param="LINEAR"):(this.pname=e,this.param=o)},o.BiquadFilterType=o.ENUMERATORS=o.QueryString=o.byId=o.E=o.scriptManager=o.loadImage=void 0;var r,a=(r=t("../program/manifest"))&&r.__esModule?r:{default:r},i=t("./events");window.degToRad=function(t){return t*Math.PI/180},window.DETECTBROWSER=function(){var t="unknown";this.NAVIGATOR=navigator.userAgent;var e,o,r=navigator.userAgent,i=r.match(/gecko/gi),a=!!r.match(/Opera|OPR\//),n=r.match(/Tablet/gi),s=r.match(/ipad/gi),l=(r.match(/iphone/gi),r.match(/Firefox/gi)),d=r.match(/mozilla/gi),h=r.match(/Chrome/gi),u=r.match(/safari/gi),g=r.match(/android/gi),c=r.match(/Macintosh/gi),m=0;window.NOMOBILE=0,(e=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()))?-1<(o=navigator.userAgent.toLowerCase()).search("android")&&-1<o.search("mobile")?console.log("ANDROID MOBILE"):-1<o.search("android")&&!(-1<o.search("mobile"))&&(console.log(" ANDROID TABLET "),m=1):NOMOBILE=1,l&&g&&0==m&&(t="mobile_firefox_android"),l&&g&&1==m&&(t="mobile_firefox_android_tablet"),a&&g&&(t="opera_mobile_android"),a&&g&&n&&(t="opera_mobile_android_tablet"),u&&(r.match(/iphone/gi)?t="safari_mobile_iphone":s?t="mobile_safari_chrome_ipad":c?t="desktop_safari":g&&(t="android_native")),h&&u&&d&&1==m&&(t="mobile_chrome_android_tablet"),h&&u&&d&&0==m&&(t="mobile_chrome_android"),h&&0==m&&(t="chrome_browser"),d&&1==NOMOBILE&&i&&l&&(t="firefox_desktop"),a&&0==m&&!e&&(t="opera_desktop"),this.NAME=t,this.NOMOBILE=NOMOBILE};o.loadImage=function(t,e){var o=new Image;return o.crossOrigin="anonymous",o.src=t,o.onload=function(){e(o)},o},window.BROWSER=new window.DETECTBROWSER;var n={SCRIPT_ID:0,SINHRO_LOAD:{},LOAD:function(t){var e=document.createElement("script");e.onload=function(){SCRIPT.SCRIPT_ID++,console.log("Script id loaded : "+SCRIPT.SCRIPT_ID+" with src: "+this.src);var t=this.src.substring(this.src.lastIndexOf("/")+1,this.src.lastIndexOf("."));t.replace(".","_")},e.setAttribute("src",t),document.body.appendChild(e)},loadModule:function(t){console.log("Script id load called ");var e=document.createElement("script");e.onload=function(){n.SCRIPT_ID++},e.setAttribute("type","module"),e.setAttribute("src",t),document.body.appendChild(e)}};o.scriptManager=n;function s(t){return document.getElementById(t)}o.E=s;o.byId=function(t){return document.getElementById(t)};var l=function(){for(var t={},e=window.location.search.substring(1).split("&"),o=0;o<e.length;o++){var r,i=e[o].split("=");void 0===t[i[0]]?t[i[0]]=decodeURIComponent(i[1]):"string"==typeof t[i[0]]?(r=[t[i[0]],decodeURIComponent(i[1])],t[i[0]]=r):t[i[0]].push(decodeURIComponent(i[1]))}return t}();o.QueryString=l,a.default.audioSystem.Assets={},a.default.audioSystem.createVideoAsset=function(r,i){return new Promise((e,o)=>{var t={};t.video=document.createElement("video"),t.video.controls=!0,t.video.autoplay=!0,s("HOLDER_STREAMS").appendChild(t.video),t.video.setAttribute("playsInline",!0),t.video.setAttribute("src","res/videos/"+i);try{window.AudioContext=window.AudioContext||window.webkitAudioContext,t.context=new AudioContext}catch(t){alert("Web Audio API is not supported in this browser")}t.gainNode=t.context.createGain(),t.gainNode.gain.value=1,t.filter=t.context.createBiquadFilter(),t.filter.frequency.value=5040,void 0!==r&&"string"==typeof r?a.default.audioSystem.Assets[r]=t:console.warn("No name argument in createVideoAsset call.");t=t.video.play();void 0!==t&&t.then(t=>{console.info("intromotocooliano autoplay started"),e(!0)}).catch(t=>{console.warn("No autoplay ",t),o()})})},a.default.audioSystem.createMusicAsset=function(r,i){return new Promise((e,o)=>{var t={};t.video=document.createElement("audio"),t.video.controls=!0,t.video.autoplay=!0,s("HOLDER_STREAMS").appendChild(t.video),t.video.setAttribute("playsInline",!0),t.video.setAttribute("src","res/music/"+i);try{window.AudioContext=window.AudioContext||window.webkitAudioContext,t.context=new AudioContext}catch(t){alert("Web Audio API is not supported in this browser")}t.gainNode=t.context.createGain(),t.gainNode.gain.value=1,t.filter=t.context.createBiquadFilter(),t.filter.frequency.value=5040,void 0!==r&&"string"==typeof r?a.default.audioSystem.Assets[r]=t:console.warn("No name argument in createVideoAsset call.");t=t.video.play();void 0!==t&&t.then(t=>{console.info("intromotocooliano autoplay started"),e(!0)}).catch(t=>{console.warn("No autoplay ",t),o()})})},o.ENUMERATORS={glTexParameter:{target:{GL_TEXTURE_2D:"GL_TEXTURE_2D",GL_TEXTURE_3D:"GL_TEXTURE_3D",GL_TEXTURE_2D_ARRAY:"GL_TEXTURE_2D_ARRAY",GL_TEXTURE_CUBE_MAP:"GL_TEXTURE_CUBE_MAP"},pname:{GL_TEXTURE_BASE_LEVEL:"TEXTURE_BASE_LEVEL",GL_TEXTURE_COMPARE_FUNC:"TEXTURE_COMPARE_FUNC",GL_TEXTURE_COMPARE_MODE:"TEXTURE_COMPARE_MODE",GL_TEXTURE_MIN_FILTER:"TEXTURE_MIN_FILTER",GL_TEXTURE_MAG_FILTER:"TEXTURE_MAG_FILTER",GL_TEXTURE_MIN_LOD:"TEXTURE_MIN_LOD",GL_TEXTURE_MAX_LOD:"TEXTURE_MAX_LOD",GL_TEXTURE_MAX_LEVEL:"TEXTURE_MAX_LEVEL",GL_TEXTURE_SWIZZLE_R:"TEXTURE_SWIZZLE_R",GL_TEXTURE_SWIZZLE_G:"TEXTURE_SWIZZLE_G",GL_TEXTURE_SWIZZLE_B:"TEXTURE_SWIZZLE_B",GL_TEXTURE_SWIZZLE_A:"TEXTURE_SWIZZLE_A",GL_TEXTURE_WRAP_S:"TEXTURE_WRAP_S",GL_TEXTURE_WRAP_T:"TEXTURE_WRAP_T",GL_TEXTURE_WRAP_R:"TEXTURE_WRAP_R"},param:{BASE_LEVEL:"",COMPARE_FUNC:"",COMPARE_MODE:"",MIN_FILTER:"",MAG_FILTER:{NEAREST:"NEAREST",LINEAR:"LINEAR"},MIN_LOD:"",MAX_LOD:"",MAX_LEVEL:"",SWIZZLE_R:{RED:"RED",GREEN:"GREEN",BLUE:"BLUE",ALPHA:"ALPHA",ZERO:"ZERO",ONE:"ONE"},SWIZZLE_G:{RED:"RED",GREEN:"GREEN",BLUE:"BLUE",ALPHA:"ALPHA",ZERO:"ZERO",ONE:"ONE"},SWIZZLE_B:{RED:"RED",GREEN:"GREEN",BLUE:"BLUE",ALPHA:"ALPHA",ZERO:"ZERO",ONE:"ONE"},SWIZZLE_A:{RED:"RED",GREEN:"GREEN",BLUE:"BLUE",ALPHA:"ALPHA",ZERO:"ZERO",ONE:"ONE"},WRAP_S:{CLAMP_TO_EDGE:"CLAMP_TO_EDGE",MIRRORED_REPEAT:"MIRRORED_REPEAT",GL_REPEAT:"GL_REPEAT"},WRAP_T:{CLAMP_TO_EDGE:"CLAMP_TO_EDGE",MIRRORED_REPEAT:"MIRRORED_REPEAT",GL_REPEAT:"GL_REPEAT"},WRAP_R:{CLAMP_TO_EDGE:"CLAMP_TO_EDGE",MIRRORED_REPEAT:"MIRRORED_REPEAT",GL_REPEAT:"GL_REPEAT"}}},glDrawElements:{help:function(){i.SYS.DEBUG.WARNING("C specification: void glDrawElements(  GLenum mode , GLsizei count , GLenum type , const GLvoid * indices ); "),i.SYS.DEBUG.WARNING(">>>mode can be : 'POINTS' , 'LINE_STRIP', 'LINE_LOOP', 'LINES', 'TRIANGLE_STRIP', 'TRIANGLE_FAN' , 'TRIANGLES' "),i.SYS.DEBUG.WARNING(">>>count    : Specifies the number of elements to be rendered."),i.SYS.DEBUG.WARNING(">>>type    : 'UNSIGNED_BYTE' , 'UNSIGNED_SHORT' , 'UNSIGNED_INT' ")},mode:["POINTS","LINE_STRIP","LINE_LOOP","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","TRIANGLES"],type:["UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT"],indices:"GL_ELEMENT_ARRAY_BUFFER"},glBlend:{param:["ZERO","ONE","SRC_COLOR","DST_COLOR","ONE_MINUS_SRC_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA","DST_ALPHA","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_ALPHA","SRC_ALPHA_SATURATE"]},glDepth:{param:["NEVER","ALWAYS","LESS","GREATER","EQUAL","LEQUAL","NOTEQUAL","GEQUAL"],returnParam:{NEVER:function(){return"NEVER"},ALWAYS:function(){return"ALWAYS"},LESS:function(){return"LESS"},GREATER:function(){return"GREATER"},EQUAL:function(){return"EQUAL"},LEQUAL:function(){return"LEQUAL"},NOTEQUAL:function(){return"NOTEQUAL"},GEQUAL:function(){return"GEQUAL"}}},getTexParameter:function(){i.SYS.DEBUG.LOG(" TEXTURE_IMMUTABLE_FORMAT VALUE : "+world.GL.gl.getTexParameter(world.GL.gl.TEXTURE_2D,world.GL.gl.TEXTURE_IMMUTABLE_FORMAT))}};o.BiquadFilterType={lowpass:"lowpass",highpass:"highpass",bandpass:"bandpass",lowshelf:"lowshelf",highshelf:"highshelf",peaking:"peaking",notch:"notch",allpass:"allpass"}},{"../program/manifest":20,"./events":5}],17:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.WebGLUtils=void 0;var r,i={create3DContext:r=function(t,e){for(var o=["webgl2"],r=null,i=0;i<o.length;++i){try{r=t.getContext(o[i],e)}catch(t){}if(r)break}return r},setupWebGL:function(t,e,o){o=o||function(t){var e,o=document.getElementsByTagName("body")[0];o&&(e=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',t&&(e+="<br/><br/>Status: "+t),o.innerHTML='<div style="margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;">'+e+"</div>")},t.addEventListener&&t.addEventListener("webglcontextcreationerror",function(t){o(t.statusMessage)},!1);e=r(t,e);return e||(window.WebGLRenderingContext,o("")),e}};o.WebGLUtils=i,window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)})},{}],18:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;t=t("./module/bvh-loader").MEBvh;o.default=t},{"./module/bvh-loader":19}],19:[function(t,e,o){"use strict";function p(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function n(t){return document.getElementById(t)}function L(t,e){var o=t.length,r=t[0].length,i=e.length,a=0,n=0,s=0;if(3==o&&3==r&&3==i){for(var l=0;l<t.length;l++)a+=t[0][l]*e[l],n+=t[1][l]*e[l],s+=t[2][l]*e[l];return[a,n,s]}console.error("Bad arguments for dot3vs1")}function x(t,e){for(var o=t.length,r=t[0].length,i=(e.length,e[0].length),a=new Array(o),n=0;n<o;++n){a[n]=new Array(i);for(var s=0;s<i;++s)for(var l=a[n][s]=0;l<r;++l)a[n][s]+=t[n][l]*e[l][s]}return a}Object.defineProperty(o,"__esModule",{value:!0}),o.dot3vs1=L,o.multiply=x,o.euler2mat=d,o.mat2euler=b,o.MEBvh=o.MEBvhJoint=void 0;var f={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},w=[1,2,0,1];function d(t,e,o,r){void 0===r&&(r="sxyz");try{var i=f[r][0],a=f[r][1],n=f[r][2],s=f[r][3]}catch(t){console.error("AttributeError: ",t)}var l=i,d=w[l+a],h=w[l-a+1];s&&(o=t=o),a&&(t=-t,e=-e,o=-o);var u=Math.sin(t),g=Math.sin(e),c=Math.sin(o),m=Math.cos(t),r=Math.cos(e),i=Math.cos(o),s=m*i,a=m*c,t=u*i,e=u*c,o=[[1,0,0],[0,1,0],[0,0,1]];return n?(o[l][l]=r,o[l][d]=g*u,o[l][h]=g*m,o[d][l]=g*c,o[d][d]=-r*e+s,o[d][h]=-r*a-t,o[h][l]=-g*i,o[h][d]=r*t+a,o[h][h]=r*s-e):(o[l][l]=r*i,o[l][d]=g*t-a,o[l][h]=g*s+e,o[d][l]=r*c,o[d][d]=g*e+s,o[d][h]=g*a-t,o[h][l]=-g,o[h][d]=r*u,o[h][h]=r*m),o}function b(t,e){var o,r,i,a;return 1!=t[2][0]&-1!=t[2][0]?(r=-1*Math.asin(t[2][0]),o=Math.PI-r,i=Math.atan2(t[2][1]/Math.cos(r),t[2][2]/Math.cos(r)),Math.atan2(t[2][1]/Math.cos(o),t[2][2]/Math.cos(o)),a=Math.atan2(t[1][0]/Math.cos(r),t[0][0]/Math.cos(r)),Math.atan2(t[1][0]/Math.cos(o),t[0][0]/Math.cos(o)),r=r,i=i,a=a):i=-1==t[2][a=0]?(r=Math.PI/2,a+Math.atan2(t[0][1],t[0][2])):(r=-Math.PI/2,-1*a+Math.atan2(-1*t[0][1],-1*t[0][2])),void 0!==e&&(i=180*i/Math.PI,r=180*r/Math.PI,a=180*a/Math.PI),[i,r,a]}class h{constructor(t,e){this.name=t,this.parent=e,this.offset=[[0,0,0],[0,0,0],[0,0,0]],this.channels=[],this.children=[]}add_child(t){this.children.push(t)}__repr__(){return this.name}position_animated(){var t=!1;for(const e in this.channels)1==this.channels[e].endsWith("position")&&(t=!0);return t}rotation_animated(){var t=!1;for(const e in this.channels)1==this.channels[e].endsWith("rotation")&&(t=!0);return t}}o.MEBvhJoint=h;o.MEBvh=class{constructor(){this.joints={},this.root=null,this.keyframes=null,this.frames=0,this.fps=0,this.myName="MATRIX-ENGINE-BVH"}async parse_file(e){return new Promise((i,t)=>{fetch(e).then(t=>{t.text().then(t=>{var e=t.split("MOTION")[0],o=t.split("MOTION")[1],r=document.createElement("div");r.innerHTML+="<h2>Hierarchy</h2>",r.innerHTML+="<p>"+e+"</p>";t=document.createElement("span");t.innerHTML+="<h2>Motion</h2>",t.innerHTML+='<p class="paragraf fixHeight" >'+o+"</p>",null!==n("log")&&(n("log").appendChild(t),n("log").appendChild(r)),this._parse_hierarchy(e),this.parse_motion(o),i()})})})}_parse_hierarchy(t){var e,o=t.split(/\s*\n+\s*/),r=[];for(e in o){var i=o[e].split(/\s+/),a=i[0],n=null;if("JOINT"==a||"ROOT"==a){var n="JOINT"==a?r[r.length-1]:null,s=new h(i[1],n);this.joints[s.name]=s,null!=n&&n.add_child(s),r.push(s),"ROOT"==a&&(this.root=s)}else if("CHANNELS"==a)for(var l=2;l<i.length;l++)r[r.length-1].channels.push(i[l]);else if("OFFSET"==a)for(l=1;l<i.length;l++)r[r.length-1].offset[l-1]=parseFloat(i[l]);else"End"==a?(s=new h(r[r.length-1].name+"_end",r[r.length-1]),r[r.length-1].add_child(s),r.push(s),this.joints[s.name]=s):"}"==a&&r.pop()}}_add_pose_recursive(t,e,o){var r=document.createElement("span");r.innerHTML+="<h2>add_pose_recursive</h2>",r.innerHTML+='<p class="paragraf" >Joint Name: '+t.name+"</p>",r.innerHTML+="<p>joint.parent    : "+(null!=t.parent?t.parent.name:"null")+"</p>",r.innerHTML+="<p>joint.offset    : "+t.offset+"</p>",r.innerHTML+="<p>joint.children.length  : "+t.children.length+"</p>",0!=t.children.length?r.innerHTML+="<p> Childrens: ":r.innerHTML+="No Childrens ",t.children.forEach(t=>{r.innerHTML+=" "+t.name+" , "}),r.innerHTML+="</p>",r.innerHTML+="<p>Argument offset : "+e+"</p>",n("log").appendChild(r);var i,a=p(t.offset,e);for(i in o.push(a),t.children)this._add_pose_recursive(t.children[i],a,o)}plot_hierarchy(){this._add_pose_recursive(this.root,[0,0,0],[])}parse_motion(t){var e,o=t.split(/\s*\n+\s*/),r=0;for(e in o){var i=o[e];if(""!=i){var a=i.split(/\s+/);if(i.startsWith("Frame Time:"))this.fps=Math.round(1/parseFloat(a[2]));else if(i.startsWith("Frames:"))this.frames=parseInt(a[1]);else{null==this.keyframes&&(i=Array.from(Array(this.frames),()=>new Array(a.length)),this.keyframes=i);for(var n=0;n<a.length;n++)this.keyframes[r][n]=parseFloat(a[n]);r+=1}}}}_extract_rotation(t,e,o){var r,i,a,n,s,l=[0,0,0];for(r in o.channels)(a=o.channels[r]).endsWith("position")||("Xrotation"==a?l[0]=t[e]:"Yrotation"==a?l[1]=t[e]:"Zrotation"==a?l[2]=t[e]:console.warn("Unknown channel {channel}"),e+=1);for(r in l=[(i=l)[0]*(Math.PI/180),i[1]*(Math.PI/180),i[2]*(Math.PI/180)],s=[[1,0,0],[0,1,0],[0,0,1]],o.channels)(a=o.channels[r]).endsWith("position")||("Xrotation"==a?n=[l[0],0,0]:"Yrotation"==a?n=[0,l[1],0]:"Zrotation"==a?n=[0,0,l[2]]:console.warn("Unknown channel {channel}"),s=x(s,d(n[0],n[1],n[2],n[3])));return[s,e]}_extract_position(t,e,o){var r,i=[0,0,0];for(r in t.channels){var a=t.channels[r];a.endsWith("rotation")||("Xposition"==a?i[0]=e[o]:"Yposition"==a?i[1]=e[o]:"Zposition"==a?i[2]=e[o]:console.warn("Unknown channel {channel}"),o+=1)}return[i,o]}_recursive_apply_frame(t,e,o,r,i,a,n){var s,l;if(t.position_animated()?(m=(f=this._extract_position(t,e,o))[0],o=f[1]):m=[0,0,0],0==t.channels.length){var d,h=0;for(d in this.joints)t.name==d&&(s=h),h++;return r[s]=p(n,L(a,t.offset)),i[s]=b(a),o}t.rotation_animated()?(l=(h=this._extract_rotation(e,o,t))[0],o=h[1]):l=[[1,0,0],[0,1,0],[0,0,1]];var u,g=x(a,l),c=p(n,L(a,t.offset)),c=p(c,m),m=b(g,"rad2deg"),f=0;for(const d in this.joints)t.name==d&&(s=f),f++;for(u in r[s]=c,i[s]=m,t.children)o=this._recursive_apply_frame(t.children[u],e,o,r,i,g,c);return o}frame_pose(t){var e,o=0;for(e in this.joints)o++;var r=Array.from(Array(o),()=>[0,0,0]),i=Array.from(Array(o),()=>[0,0,0]),a=this.keyframes[t],t=[[0,0,0],[0,0,0],[0,0,0]];return t[0][0]=1,t[1][1]=1,t[2][2]=1,this._recursive_apply_frame(this.root,a,0,r,i,t,[0,0,0]),[r,i]}all_frame_poses(){var t,e=0;for(t in this.joints)e++;for(var o=Array.from({length:this.frames},()=>Array.from({length:e},()=>[0,0,0])),r=Array.from({length:this.frames},()=>Array.from({length:e},()=>[0,0,0])),i=0;i<this.keyframes.length;i++){var a=this.frame_pose(i);o[i]=a[0],r[i]=a[1]}return[o,r]}_plot_pose(t,e,o,r){}plot_frame(t,e,o){}joint_names(){var t,e=[];for(t in this.joints)e.push(t);return e}plot_all_frames(){}__repr__(){return`BVH.JS ${this.joints.keys().length} joints, ${this.frames} frames`}}},{}],20:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default={name:"Matrix Engine Manifest",version:"1.0.6",events:!0,logs:!1,draw_interval:10,antialias:!1,camera:{viewAngle:45,nearViewpoint:.1,farViewpoint:1e3,edgeMarginValue:100,FirstPersonController:!1,speedAmp:.5},raycast:!0,resize:{canvas:"full-screen",aspectRatio:1.8},glBackgroundColor:{r:0,g:0,b:0,a:1},textures:[],tools:{},operation:{},commonObject:{},dynamicBuffer:!0,scene:{},meshes:{},limitations:{maxTexturesInFragmentShader:null},updateBeforeDraw:[],audioSystem:{},pwa:{addToHomePage:!0},ready:!1,onload:function(){}}},{}]},{},[1]);
